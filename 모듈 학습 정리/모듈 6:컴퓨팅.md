# 모듈 6: 컴퓨팅

## 개요
### 주제
* 컴퓨팅 서비스 개요
* Amazon EC2
* Amazon EC2 비용 최적화
* 컨테이너 서비스
* AWS Lambda 소개
* AWS Elastic Beanstalk 소개

## 섹션 1: 컴퓨팅 서비스 개요

### 1. AWS 컴퓨팅 서비스
> AWS는 다양한 컴퓨팅 서비스를 제공함. 다음에는 각 컴퓨팅 서비스가 제공하는 기능이 요약되어 있음.
> > * Amazon Elastic Compute Cloud(Amazon EC2): 크기 조정이 가능한 가상 머신을 제공함.  
> > * Amazon EC2 Auto Scailing: EC2 인스턴스를 자동으로 시작하거나 종료하는 조건을 정의할 수 있도록 하여 애플리케이션 가용성을 지원함.  
> > * Amazon Elastic Container Registry(Amazon ECR): Docker 이미지를 저장하고 검색하는 데 사용됨.  
> > * Amazon Elastic Container Service(ECS): Docker를 지원하는 컨테이너 오케스트레이션 서비스임.  
> > * VMware Cloud on AWS: 맞춤형 하드웨어 없이 하이브리드 클라우드를 프로비저닝할 수 있도록 해줌.  
> > * AWS Elastic Beanstalk: 간편하게 웹 애플리케이션을 실행하고 관리할 수 있는 서비스임.  
> > * AWS Lambda: 서버리스 컴퓨팅 솔루션임. 사용한 컴퓨팅 시간에 대한 요금만 지불함.  
> > * Amazon Elastic Kubernetes Service(Amazon EKS): AWS에서 관리형 Kubernetes를 실행할 수 있음.  
> > * Amazon Lightsail: 애플리케이션 또는 웹 사이트를 구축할 수 있는 간편한 서비스를 제공함.  
> > * AWS Batch: 규모에 관계없이 배치 작업을 실행할 수 있는 도구를 제공함.  
> > * AWS Fargate: 서버 또는 클러스터를 관리해야 하는 부담이 적은 컨테이너를 실행하는 서비스를 제공함.  
> > * AWS Outposts: 온프레미스 데이터 센터에서 엄선된 AWS 서비스를 실행할 수 있도록 지원함.  
> > * AWS Serverless Application Repository: 서버리스 애플리케이션을 검색,배포 및 게시할 수 있음.  
---
### 2. 컴퓨팅 서비스 분류
> * 각 AWS 컴퓨팅 서비스는 크게 **IaaS(서비스형 인프라)를 제공하는 VM(가상 머신)**, **서버리스**, **컨테이너 기반** 및 **PaaS(서비스형 플랫폼)** 라는 네 가지 범주 중 하나에 속한다고 생각할 수 있음.  
> 1. Amazon EC2
> > * 가상 머신을 제공하며 개념상 **IaaS(서비스형 인프라)** 라고 할 수 있음.  
> > * IaaS 서비스는 유연성을 제공하며, 서버 관리 작업의 많은 부분을 사용자가 수행해야 함. 운영 체제는 물론, 실행하는 서버의 크기 및 리소스 기능도 사용자가 선택함.  
> > * 온프레미스 컴퓨팅을 사용한 경험이 있는 IT 전문가에게 가상 머신은 익숙한 개념임.  
> > * Amazon EC2는 최초의 AWS 서비스 중 하나이자 여전히 가장 인기 있는 서비스 중 하나임.  
> 2. AWS Lambda
> > * AWS Lambda는 관리할 필요가 전혀 없는 컴퓨팅 플랫폼임. AWS Lambda를 사용하면 서버를 프로비저닝하거나 관리하지 않고도 코드를 실행할 수 있음.  
> > * 또한 사용한 컴퓨팅 시간에 대한 요금만 지불함.  
> > * 이 서버리스 기술 개념은 대다수 IT 전문가에게 비교적 새로운 개념임. 하지만 클라우드 네이티브 아키텍처를 지원하므로 서버를 24/7으로 실행하여 동일한 워크로드를 지원할 때보다 저렴한 비용으로 대규모 확장이 가능하기 때문에 갈수록 더 각광을 받고 있음.  
> 3. AWS Elastic Container Service, Amazon Elastic Kubernetes Service, AWS Fargate 및 Amazon Elastic Container Registry
> > * 위와 같은 서비스를 비롯한 **컨테이너 기반 서비스**를 사용하면 단일 OS에서 여러 워크로드를 실행할 수 있음.  
> > * 컨테이너는 가상 머신보다 더 빠르게 구동되므로 응답 성능이 향상됨.  
> 4. AWS Elastic Beanstalk
> > * **PaaS(서비스형 플랫폼)** 를 제공함. 필요한 모든 애플리케이션 서비스를 제공하므로 생성한 애플리케이션을 신속하게 배포할 수 있음.  
> > * OS, 애플리케이션 서버 및 기타 인프라 구성 요소를 AWS가 관리하므로, 사용자는 애플리케이션 코드 개발에 집중할 수 있음.  
---
### 3. 최적의 컴퓨팅 서비스 선택
> * AWS는 다양한 컴퓨팅 서비스를 제공함. 사용 사례마다 적합한 컴퓨팅 환경이 서로 다르기 때문임. 최적의 컴퓨팅 서비스 또는 사용하는 서비스는 사용 사례에 따라 달라짐.  
> * 사용하는 컴퓨팅 아키텍처는 레거시 코드에 의해 결정되는 경우가 많음. 하지만 검증된 클라우드 네이티브 설계를 활용하여 아키텍처를 발전시킬 수도 있음. 
> * 모범 사례는 다음과 같음.
> > - 사용 가능한 컴퓨팅 옵션 평가  
> > - 사용 가능한 컴퓨팅 구성 옵션 이해  
> > - 컴퓨터 관련 지표 수집  
> > - 사용 가능한 리소스의 탄력성 활용  
> > - 지표를 기준으로 컴퓨팅 요구 사항 재평가  
> * 고객이 특정 컴퓨팅 솔루션으로 시작한 후, 지표 분석 결과에 따라 설계를 변경하기로 결정할 수도 있음.
#
## 섹션 2: Amazon EC2

### 1. Amazon Elastic Compute Cloud(Amazon EC2)
> * 온프레미스 서버
> > * 온프레미스 서버를 실행하는 것은 비용이 많이 듦. 하드웨어를 구매해야 하며, 이 같은 구매는 실제로 서버가 사용되는 방식이 아니라 프로젝트 계획을 기반으로 이루어질 수 있음.  
> > * 데이터 센터는 구축, 인력 배치 및 유지 보수 비용이 많이 듦. 또한 조직은 급증하는 트래픽과 피크 워크로드를 처리할 수 있도록 충분한 양의 하드웨어를 영구적으로 프로비저닝해야 함.  
> > * 기존 온프레미스 배포 환경이 구축된 후에는 서버 용량이 사용되지 않고, 서버가 실행되는 동안 상당 부분 유휴 상태로 남을 수 있는데 이는 말그대로 낭비임.  
>   
> * Amazon EC2
> > * Amazon EC2는 기존 온프레미스 서버에서 실행하는 것과 동일한 유형의 애플리케이션을 호스팅할 수 있는 가상 머신을 제공함.  
> > * 또한 Amazon EC2는 클라우드에서 안전하고 크기 조정이 가능한 컴퓨팅 파워를 제공함.  
> > * EC2 인스턴스는 다양한 워크로드를 지원할 수 있음. EC2 인스턴스의 일반적인 용도는 다음과 같지만 이에 국한되지 않음.  
> > > 애플리케이션 서버, 웹 서버, 데이터베이스 서버, 게임 서버, 메일 서버, 미디어 서버, 카탈로그 서버, 파일 서버, 컴퓨팅 서버, 프록시 서버  
---
### 2. Amazon EC2 개요
> * EC2는 Elastic Compute Cloud를 의미함.  
> > 1) **Elastic**이란 애플리케이션을 자동으로 지원하기 위해 실행하는 서버 수를 손쉽게 늘리거나 줄일 수 있으며, 기존 서버의 크기를 늘리거나 줄일 수도 있다는 것을 나타냄.  
> > 2) **Compute**란 대부분의 사용자가 서버를 실행하는 근본적인 이유, 즉 실행되는 애플리케이션을 호스팅하거나 데이터를 처리하는 것을 말함. 이 같은 작업에는 처리 능력(CPU), 메모리(RAM)등의 컴퓨팅 리소스가 필요함.  
> > 3) **Cloud**는 실행하는 EC2 인스턴스가 클라우드에서 호스팅된다는 것을 의미함.  
>   
> * Amazon EC2는 클라우드에서 가상 머신을 제공하며, 인스턴스에서 실행되는 Windows 또는 Linux 운영 체제에 대한 완전관리형 제어 기능을 제공함. (Windows 2008,2012,2016,2019, Red Hat, SuSE, Ubuntu, Amazon Linux 등 서버 운영 체제 대부분이 지원됨.)  
> * 가상 머신에서 실행되는 운영 체제를 호스트 운영 체제와 구별하기 위해 **게스트 운영 체제**라고 하는 경우가 많음. 호스트 운영 체제는 하나 이상의 가상 머신을 호스팅하는 모든 서버 하드웨어에 직접 설치됨.  
> * Amazon EC2에서는 몇 분 만에 전 세계 어디서나 원하는 가용 영역에서 원하는 수의 인스턴스를 시작할 수 있음. 인스턴스는 사실상 가상 머신 템플릿인 Amazon Machine Image(AMI)에서 시작됨.  
> * 보안 그룹을 사용하여 인스턴스 안팎으로 전송되는 트래픽을 제어할 수 있음. 또한 서버가 AWS 클라우드에서 실행되므로 여러 AWS 서비스를 이용하는 솔루션을 구축할 수 있음.  
---
### 3. Amazon EC2 인스턴스 시작 ~ 실습 부분 생략
#
## 섹션 3: Amazon EC2 비용 최적화

### 1. Amazon EC2 요금 모델
> Amazon은 EC2 인스턴스를 실행할 때 선택할 수 있는 다양한 요금 모델을 제공함.  
> > 1) **초당 결제** 옵션은 Amazon Linux 또는 Ubuntu를 실행하는 **온디맨드 인스턴스, 예약 인스턴스 및 스팟 인스턴스**에 대해서만 사용할 수 있음. 
> >    
> > 2) **온디맨드 인스턴스**에는 AWS 프리 티어가 적용됨. 선결제 금액이 가장 낮으며 가장 유연함. 사전 약정이나 장기 계약 조건이 없음. 이 인스턴스는 단기간 커지거나 작아지는 등 워크로드를 예측할 수 없는 애플리케이션에 적합함.  
> >   
> > 3) **전용 호스트**는 사용자 전용의 인스턴스 용량을 갖춘 물리적 서버임. 전용 호스트를 통해 Microsoft Windows 또는 Microsoft SQL Server 등에 대해 기존 소켓당, 코어당 또는 VM당 소프트웨어 라이선스를 사용할 수 있음.  
> >   
> > 4) **전용 인스턴스**는 단일 고객에게만 할당된 하드웨어의 VPC(가상 프라이빗 클라우드)에서 실행되는 인스턴스임. 호스트 하드웨어 수준에서 다른 AWS 계정에 속하는 인스턴스로부터 물리적으로 격리됨.  
> >   
> > 5) **예약 인스턴스**를 사용하면 더 저렴한 시간당 실행 비용으로 1년 또는 3년 기간 동안 컴퓨팅 용량을 예약할 수 있음. 할인된 이용 요금이 예약 인스턴스를 소유한 동안 고정으로 적용됨. 꾸준히 많은 사용량이 예상되는 경우 온디맨드 인스턴스에 비해 상당한 비용 절감 효과를 얻을 수 있음.  
> >   
> > 6) **예정된 예약 인스턴스**를 사용하려면 1년 약정으로 지정된 기간 동안 매일, 매주 또는 매월 반복되는 용량 예약을 구매할 수 있음. 인스턴스를 사용하지 않더라도 인스턴스가 예약된 시간에 대한 비용을 지불함.  
> >   
> > 7) **스팟 인스턴스**를 사용하면 미사용 EC2 인스턴스에 입찰하여 비용을 낮출 수 있음. 스팟 인스턴스의 시간당 가격은 공급과 수요에 따라 변동됨. 스팟 인스턴스는 입찰이 현재 시장 가격을 초과할 때마다 실행됨.  
---
### 2. Amazon EC2 요금 모델: 이점
> Amazon EC2 요금 모델마다 서로 다른 이점을 제공함.  
> > 1) **온디맨드 인스턴스**는 장기 계약이나 저렴한 요금 조건 없이 최고의 유연성을 제공함.  
> >     
> > 2) **스팟 인스턴스**는 대폭 할인된 가격으로 대규모 용량을 제공함.  
> >   
> > 3) **예약 인스턴스**는 컴퓨팅 요구 사항이 예측 가능하거나 안정적인 경우에 적합함.(ex.몇 달 또는 몇 년간 대부분의 시간 동안 또는 상시 실행하려는 인스턴스)  
> >   
> > 4) **전용 호스트**는 Amazon EC2에서 실행하려는 소프트웨어에 대한 라이선스 제한이 있거나 다른 배포 옵션을 사용할 수 없는 특정 규정 준수 또는 규제 요구 사항이 있는 경우에 적합함.  
---
### 3. Amazon EC2 요금 모델: 사용 사례
> 1) **온디맨드 인스턴스** 요금은 급증하는 워크로드, 또는 짧은 시간 동안만 테스트하거나 실행해야 하는 애플리케이션(ex.애플리케이션 개발 또는 테스트 시)을 지원하는 데 적합함. 워크로드를 예측할 수 없는 경우도 있는데, 이러한 경우 온디맨드 인스턴스를 선택하는 것이 좋음.  
> 
> 2) **스팟 인스턴스**는 2분 전에 경고 알림을 보내고 중단해도 무방한 애플리케이션에 적합함. 기본적으로 인스턴스는 종료되지만, 종료하는 대신 중지하거나 최대 절전 모드로 전환하도록 구성할 수도 있음. 일반적인 사용 사례에는 **웹 서버, API 백엔드, 빅데이터 처리와 같은 내결함성 애플리케이션**이 포함됨. 데이터를 영구 스토리지(ex.Amazon S3)에 지속적으로 저장하는 워크로드에도 이 인스턴스가 적합함.  
> 
> 3) **예약 인스턴스**는 사용 패턴을 예측할 수 있는 장기 워크로드가 있는 경우(ex.수개월 동안 일관된 방식으로 실행하려는 서버)에 적합함.  
> 
> 4) **전용 호스트**는 기존 소켓당, 코어당 또는 VM당 소프트웨어 라이선스가 있거나 특정 기업 규정 준수 및 규제 요구 사항을 충족해야 하는 경우에 적합함.  
---
### 4. 비용 최적화의 4가지 원칙
> 비용을 최적화하려면 일관되고 강력한 4가지 추진 요인을 고려해야 함.  
> > 1) **크기 조정**: 인스턴스 유형의 올바른 균형을 선택함. 서버 크기를 축소하거나 해제하더라도 성능 요구 사항을 충족할 수 있음.  
> >   
> > 2) **탄력성 증대**: 자동 조정을 사용하여 피크 로드를 처리하는 배포 환경과 같이 탄력적인 배포 환경을 구현하여 유휴 상태의 서버 용량을 줄이도록 배포를 설계함.  
> >   
> > 3) **최적의 요금 모델**: 사용 가능한 요금 옵션을 파악함. 사용 패턴을 분석하여 적절한 요금 옵션 조합으로 EC2 인스턴스를 실행할 수 있음.  
> >   
> > 4) **스토리지 선택 최적화**: 배포의 스토리지 요구 사항을 분석함. 가능한 경우 사용하지 않는 스토리지 오버헤드를 줄이고, 스토리지 성능 요구 사항을 충족할 수 있다면 더 저렴한 스토리지 옵션을 선택함.  
---
#### 원칙 1: 적절한 크기
> * 먼저 적절한 크기를 고려함.  
> * AWS는 약 60개의 인스턴스 유형 및 크기를 제공함. 다양한 옵션을 통해 고객은 자신의 워크로드에 가장 적합한 인스턴스를 선택할 수 있음. 어디에서 시작할지, 어떤 인스턴스를 선택하는 것이 가장 적합한지 기술적 관점과 비용 측면 모두에서 알기 어려울 수 있음.  
> * 적절한 크기 조정은 배포된 리소스를 검토하고 가능한 경우 크기를 축소할 기회를 모색하는 프로세스임.  
> * **크기를 적절하게 조정하기 위해서는:**  
> > - 성능 요구 사항을 만족하면서 사용 가능한 가장 저렴한 인스턴스를 선택함.  
> > - CPU, RAM, 스토리지 및 네트워크 사용률을 검토하여 크기를 줄일 수 있는 인스턴스를 식별함. 테스트 환경에서 다양한 인스턴스 유형과 크기를 프로비저닝한 다음, 서로 다른 테스트 배포에서 애플리케이션을 테스트하여 **최적의 비용 대비 성능을 제공하는 인스턴스**를 찾을 수 있음. 적절한 크기 조정에는 로드 테스트와 같은 기술을 활용할 수 있음.  
> > - Amazon CloudWatch 지표를 활용하고 사용자 지정 지표를 설정함. 지표는 CloudWatch에 게시되는 시간순 값 집합을 나타냄(ex.특정 EC2 인스턴스의 CPU 사용량). 데이터 포인트는 데이터를 수집하는 모든 애플리케이션 또는 비즈니스 활동에서 가져올 수 있음.  
---
#### 원칙 2: 탄력성 증대 
> * 필요할 때 EC2 인스턴스를 생성, 시작 또는 사용하고 사용하지 않을 때는 해제하는 것도 탄력성의 한 가지 형태임.  
> * 탄력성은 클라우드의 핵심 원리 중 하나이지만, 비용 절감을 위해 고객이 학습 과정을 거쳐 탄력성을 활용하는 경우가 많음.  
   
> * 대규모 고객이 탄력성을 수용하는 가장 쉬운 방법은 비프로덕션 환경, 개발 워크로드 또는 테스트 워크로드와 같이 중지 또는 최대 절전 모드로 전환하기에 적합한 리소스를 찾는 것임.  
> * 예를 들어, 단일 표준 시간대에서 개발 또는 테스트 워크로드를 실행하는 경우 업무 외 시간에 이러한 인스턴스를 손쉽게 해제하여 런타임 비용을 65% 절감할 수 있음.  
> * 이 개념은 **문 옆에 조명 스위치가 있는 이유**, 그리고 **대부분의 사무실에서 매일 밤 퇴근 시 조명을 끄도록 권장하는 이유**와 비슷함. 

> * 프로덕션 워크로드의 경우, 보다 정밀하고 세분화된 자동 조정 정책을 구성하면 수평적 조정을 활용하여 최대 용량 요구 사항을 충족할 수 있으며, 최대 용량에 대한 비용을 계속 지불하지 않아도 됨.

> * 경험상, **온디맨드 인스턴스 또는 스팟 인스턴스로 실행할 Amazon EC2 인스턴스의 20~30%** 를 목표로 해야 하며, 탄력성을 극대화할 방법을 적극적으로 모색해야 함.  
---
#### 원칙 3: 최적의 요금 모델
> * AWS는 다양한 Amazon EC2 요금 모델을 통해 고객의 비용 절감을 지원함.  
> * 고객은 현재 그리고 앞으로의 용량 요건에 맞춰 다양한 구매 유형을 조합해 요금을 최적화할 수 있음.

> * 또한 고객은 애플리케이션 아키텍처를 고려하는 것이 좋음.  
> * 예를 들어, 애플리케이션에서 제공하는 기능을 EC2 가상 머신에서 실행해야 할지 고려함. 이 경우 AWS Lambda 서비스를 대신 사용하면 비용을 크게 절감할 수 있음.
---
#### 원칙 4: 스토리지 선택 최적화 
> * EC2 인스턴스를 시작할 때 인스턴스 유형마다 서로 다른 스토리지 옵션을 제공함. **스토리지 성능과 가용성을 유지하면서 비용을 절감하는 것**이 모범 사례임.  
> * 이를 실현하는 한 가지 방법은 **EBS 볼륨의 크기를 조정**하는 것임. 예를 들어 최대 20GB의 스토리지 공간만 필요한 EC2 인스턴스에 대해 애초에 500GB 볼륨을 프로비저닝한 경우 볼륨 크기를 줄이고 비용을 절감할 수 있음.  
> > **Amazon EBS(Elastic Block Store)**: 일종의 하드디스크로 EC2 인스턴스를 저장함. 사용한 만큼 과금되는 종량제임. 필요에 따라 즉시 생성 또는 삭제할 수 있음.  

> * EBS의 볼륨 유형도 다양한데, 성능 요구 사항을 충족하는 가장 저렴한 유형을 선택함.  
> * 예를 들어, Amazon EBS 처리량 최적화 HDD(st1) 스토리지는 일반적으로 기본 범용 SSD(gp2) 스토리지 옵션에 비해 절반의 비용이 듦. st1 드라이브가 워크로드 요구를 충족할 경우 이 드라이브를 활용하여 비용을 절감함.  

> * 마지막으로 **특정 데이터 유형에 가장 적합한 대상**을 식별함.  
> * 애플리케이션에서 사용하는 데이터가 Amazon EBS에 상주해야 하는지, Amazon S3를 스토리지에 사용하더라도 애플리케이션이 똑같이 잘 실행되는지 등을 고려함.  
> * 데이터 수명 주기 정책을 구성하여 비용을 절감할 수도 있음. 예를 들어, 자주 액세스하지 않는 오래된 데이터를 Amazon S3 Glacier와 같은 저렴한 스토리지 위치로 마이그레이션하는 작업을 자동화할 수 있음.  
> > **마이그레이션**: 한 운영환경으로부터, 대개의 경우 좀더 낫다고 여겨지는 다른 운영환경으로 옮겨가는 과정  
---
### 5. 측정, 모니터링 및 개선
> * 제대로 된 비용 최적화는 일회성으로 끝나는 프로세스가 아님. 일회성으로 끝내는 게 아니라 정기적으로 시스템을 측정하고 분석함으로써 비용을 지속적으로 개선하고 조정할 수 있음.  

> * **태깅**을 통해 어떤 리소스를 누가, 어떤 용도로 사용하고 있는지에 대한 정보를 얻을 수 있음.  
> * 결제 및 비용 관리 콘솔에서 비용 할당 태그를 활성화할 수 있으며, AWS는 활성 태그별로 그룹화된 사용 내역 및 비용이 포함된 비용 할당 보고서를 생성할 수 있음.  
> * 비즈니스 범주를 나타내는 태그(ex.비용 센터, 애플리케이션 이름 또는 소유자)를 적용하여 여러 서비스에 대한 비용을 정리함.  

> * 팀이 비용을 고려하여 설계하도록 장려함.   
> * AWS Cost Explorer는 비용 그래프를 보는 데 사용할 수 있는 무료 도구임.  
> * Cost Explorer를 사용하면 시간 경과에 따라 AWS 리소스에 지출하는 금액의 패턴을 보고, 추가 질의가 필요한 영역을 식별하며, 비용을 이해하는 데 사용할 수 있는 추세를 알아볼 수 있음.  

> * AWS 모범 사례에 따라 리소스를 프로비저닝할 수 있도록 실시간 지침을 제공하는 AWS Trusted Advisor와 같은 AWS 서비스를 이용함.  

> * 비용 최적화 작업은 일반적으로 비용 최적화에 대한 책임을 개인이나 팀에 부여할 때 더 성공적으로 이루어









