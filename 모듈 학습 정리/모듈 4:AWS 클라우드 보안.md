# 모듈 4: AWS 클라우드 보안

## 개요

### 주제
* AWS 공동 책임 모델
* AWS Identity and Access Management(IAM)
* 새 AWS 계정 보안
* 계정 보안
* AWS의 데이터 보안

### 목표
* 공동 책임 모델의 이해
* 고객 및 AWS의 책임 확인
* IAM 사용자, 그룹 및 역할의 이해
* IAM의 다양한 보안 자격 증명 유형 설명
* 새 AWS 계정 보안을 위한 단계 확인
* IAM 사용자 및 그룹 탐색
* AWS 데이터를 보호하는 방법 이해
* AWS 규정 준수 프로그램 이해

## 섹션 1: AWS 공동 책임 모델
### 1. AWS 공동 책임 모델
> * 보안과 규정 준수는 AWS와 고객의 공동 책임임. 이 공동 책임 모델은 고객의 운영 부담을 덜어주기 위해 만들어졌음.  
> * 또한 **전체 보안의 일부 측면에 대한 책임을 고객에게 맡김**으로써 고객이 유연하게 AWS에 솔루션을 배포하고 이러한 배포를 제어할 수 있도록 함.  
> * 책임의 주체와 대상의 차이를 나타내기 위해 **클라우드"자체"의 보안**과 **클라우드"내부"의 보안**이라는 표현이 사용됨.

> * AWS는 소프트웨어 가상화 계층부터 AWS 서비스가 운영되는 시설의 물리적 보안에 이르기까지 구성 요소를 운영,관리 및 제어함.  
> * AWS는 AWS 클라우드에 제공된 모든 서비스를 실행하는 인프라를 보호할 책임이 있음.  
> * 이러한 인프라는 AWS 클라우드 서비스를 실행하는 하드웨어, 소프트웨어, 네트워킹 및 시설로 구성됨.  

> * 고객은 유휴 데이터와 전송 중 **데이터를 암호화할 책임**이 있음.  
> * 또한 고객은 네트워크에 보안을 구성하고 보안 자격 증명 및 로그인을 안전하게 관리할 책임이 있음.  
> * 또한 고객은 보안 그룹의 구성과 시작하는 컴퓨팅 인스턴스(업데이트 및 보안 패치 포함)에서 실행되는 운영 체제의 구성에 대한 책임이 있음.  
---
### 2. AWS의 책임: 클라우드(자체)의 보안
**AWS는 클라우드의 보안을 책임짐.**  

> * AWS 공동 책임 모델에서 AWS는 베어 메탈 호스트 운영 체제 및 하이퍼바이저 가상화 계층의 구성 요소와 함께 서비스가 운영되는 시설의 물리적인 보안을 운영하고,관리하고,제어함.  
> * 즉, AWS는 AWS 클라우드에 제공된 모든 서비스를 실행하는 글로벌 인프라를 보호할 책임이 있음. (글로벌 인프라에는 AWS 리전, 가용 영역 및 엣지 로케이션이 포함됨.)  

> * AWS는 다음과 같은 리소스를 호스팅하는 물리적 인프라를 책임짐.  
> > 1) **데이터 센터의 물리적 보안**: 필요 기반의 통제된 출입 관리, 공개되지 않는 시설에 위치, 연중무휴 24시간 보안 경비, 이중 인증, 액세스 로깅 및 검토, 비디오 감시, 디스크 자기 소거 및 폐기  
> > 2) **하드웨어 인프라**: AWS 서비스에서 사용하는 서버, 스토리지 디바이스 및 기타 어플라이언스 등  
> > > **어플라이언스**: 각종 기업용 소프트웨어를 서버와 스토리지 하드웨어에 최적화해 통합한 장비를 말하며, 별도의 운영체제(OS)나 소프트웨어를 설치하지 않아도 전원을 켜면 곧바로 사용할 수 있는 정보 기기를 의미함.  
> > 3) **소프트웨어 인프라**: 운영 체제, 서비스 애플리케이션 및 가상화 소프트웨어 호스팅  
> > 4) **네트워킹 인프라**: 라우터,스위치,로드 밸런서,방화벽 및 케이블 등 AWS는 외부 경계에서 네트워크를 지속적으로 모니터링하고, 액세스 포인트를 보호하며, 침입 탐지 기능이 있는 이중화된 인프라를 제공함.  

> * 이 인프라를 보호하는 것이 AWS의 최우선 과제임. AWS 데이터 센터나 사무실을 직접 방문하여 이 보호 기능을 직접 체험할 수는 없지만, Amazon은 다양한 컴퓨터 보안 표준 및 규정 준수 여부를 확인한 외부 감사 기관의 여러 가지 보고서를 제공함.  
---
### 3. 고객의 책임: 클라우드에서(내부)의 보안
**AWS가 클라우드 인프라를 보호 및 유지 관리하는 동안 고객은 클라우드에 있는 모든 것의 보안을 책임짐.**

> * 고객은 AWS 서비스를 사용하여 구현한 것과 AWS에 연결되는 애플리케이션에 대한 책임이 있음.  
> * 수행해야 하는 보안 단계는 사용하는 서비스와 시스템의 복잡성에 따라 다름.  

> * 고객의 책임에는 인스턴스 운영 체제의 선택 및 보안, AWS 리소스에서 시작되는 애플리케이션 보안, 보안 그룹 구성, 방화벽 구성, 네트워크 구성, 보안 계정 관리가 포함됨.  
> * AWS 서비스를 사용할 때 고객 콘텐츠는 모두 고객이 제어함. 고객은 다음과 같은 중요한 콘텐츠 보안 요구 사항을 관리할 책임이 있음.  
> > - AWS에 저장하기로 선택한 콘텐츠  
> > - 콘텐츠에 사용되는 AWS 서비스  
> > - 콘텐츠가 저장되는 국가  
> > - 콘텐츠의 형식 및 구조와 마스킹, 익명화 또는 암호화 여부  
> > - 콘텐츠에 액세스할 수 있는 사용자 및 이러한 액세스 권한을 부여,관리,취소하는 방법  

> * 자체 데이터, 환경, 애플리케이션, IAM 구성 및 운영 체제를 보호하기 위해 구현하기로 선택한 보안에 대한 제어 권한은 고객에게 있음.  
---
### 4. 서비스 특성 및 보안 책임  
**1. IaaS(서비스형 인프라)**  
> * IaaS는 클라우드 IT의 기본적인 구성 요소를 제공하는 서비스를 나타내며 일반적으로 네트워킹, 컴퓨터(가상 또는 전용 하드웨어) 및 데이터 스토리지 공간을 구성할 수 있는 액세스 권한이 포함됨.  
> * IaaS로 특징지을 수 있는 클라우드 서비스는 **고객에게 IT 리소스에 대한 최고 수준의 유연성과 관리 제어**를 제공함.  
> * IaaS 서비스는 현재의 많은 IT 부서에서 사용되는 기존의 온프레미스 컴퓨팅 리소스와 가장 유사함.  
> * Amazon EC2와 같은 AWS 서비스는 IaaS 범주에 포함될 수 있으므로, 필요한 모든 보안 구성과 관리 작업을 고객이 수행해야 함.  
> * EC2 인스턴스를 배포하는 고객은 게스트 운영 체제(업데이트 및 보안 패치 포함), 인스턴스에 설치된 모든 애플리케이션 소프트웨어 및 AWS에서 제공한 보안 그룹의 구성을 관리할 책임이 있음.  

**2. PaaS(서비스형 플랫폼)**
> * PaaS는 고객이 기반 인프라(하드웨어,운영 체제 등)를 관리할 필요가 없는 서비스를 나타냄.  
> * PaaS 서비스를 사용하면 리소스 조달, 용량 계획, 소프트웨어 유지 관리 또는 패치에 대해 걱정할 필요 없이, 애플리케이션의 배포 및 관리에만 전적으로 집중할 수 있음.  
> * AWS Lambda 및 Amazon RDS 같은 AWS 서비스는 PaaS 범주에 포함될 수 있음. 이는 AWS가 인프라 계층, 운영 체제 및 플랫폼을 운영하기 때문임.  
> * 고객은 엔드포인트에 액세스하여 데이터를 저장하고 검색하기만 하면 됨. 
> * PaaS 서비스를 사용하는 고객은 데이터를 관리하고 자산을 분류하며 적절한 권한을 적용할 책임이 있음.  
> * 그러나 이러한 서비스의 작동 방식은 관리형 서비스와 더 비슷하며, AWS에서 보안 요구 사항의 더 많은 부분을 처리함.  
> * 이러한 서비스의 경우, 운영 체제 및 데이터베이스 패치 적용, 방화벽 구성 및 재해 복구와 같은 기본적인 보안 작업을 AWS가 처리함.  

**3. SaaS(서비스형 소프트웨어)**
> * SaaS는 일반적으로 웹 브라우저, 모바일 앱 또는 API(Application Programming Interface)를 통해 액세스할 수 있는 중앙 호스팅 소프트웨어를 제공하는 서비스를 나타냄.  
> * SaaS 오퍼링의 라이선스 모델은 일반적으로 구독 또는 종량 과금제임. SaaS 오퍼링을 사용하는 고객은 서비스를 지원하는 인프라를 관리할 필요가 없음.  
> * AWS Trusted Advisor, AWS Shield 및 Amazon Chime 같은 일부 AWS 서비스는 서비스 특성을 고려할 때 SaaS 오퍼링 범주에 포함될 수 있음.  
> > **AWS Trusted Advisor**는 AWS 환경을 분석한 후 AWS 모범 사례에 따라 리소스를 프로비저닝하는데 유용한 실시간 지침과 권장 사항을 제공하는 온라인 도구임.  
> > Trusted Advisor 서비스는 AWS Support 플랜의 일부로 제공됨. 일부 Trusted Advisor 기능은 모든 계정에서 무료이지만, **Business Support 및 Enterprise Support** 고객의 경우 전체 Trusted Advisor 검사 및 권장 사항에 액세스할 수 있음.  

> > **AWS Shield**는 AWS에서 실행되는 애플리케이션을 보호하는 관리형 DDoS 방어 서비스임. 이 서비스는 애플리케이션 다운타임 및 지연 시간을 최소화하는 상시 탐지 및 자동 즉시 완화를 제공하므로 AWS Support의 지원 없이 DDoS 방어 기능을 활용할 수 있음.  
> > AWS Shield Advanced는 모든 고객에게 제공됨. 그러나 DDoS 대응 팀의 지원을 받으려면 AWS Support의 **Business Support 또는 Enterprise Support**가 있어야 함.  

> > **Amazon Chime**은 단일 애플리케이션에서 조직 내/외부의 회의,채팅 및 비즈니스 통화 기능을 사용할 수 있는 커뮤니케이션 서비스임. 이 서비스는 선결제, 약정 또는 장기 계약이 없는 종량 과금제 커뮤니케이션 서비스임.  
#
## 섹션 2: AWS Identity and Access Management(IAM)

### 1. IAM
> * IAM을 사용하면 AWS 클라우드의 컴퓨팅,스토리지,데이터베이스,애플리케이션 서비스에 대한 액세스를 제어할 수 있음.  
> * IAM을 사용하여 인증을 처리하고, 권한 부여 정책을 지정 및 적용하여 서비스에 액세스할 수 있는 사용자를 지정할 수 있음.  

> * IAM은 AWS 계정의 리소스를 시작,구성,관리 및 종료하는 데 **필요한 액세스 권한을 중앙에서 관리하는 도구**임.  
> * 각 서비스에서 사용자가 호출할 수 있는 API 호출을 정확히 지정하는 기능을 포함하여 **리소스에 대한 액세스를 세부적으로 제어하는 데 필요한 기능**을 제공함.  
> * AWS Management Console, AWS CLI 또는 AWS SDK 중에서 어떤 방법을 사용하든 AWS 서비스에 대한 모든 호출은 **API 호출**임.  

> * IAM을 사용하면 리소스에 액세스할 수 있는 사용자와 이러한 리소스에 액세스하는 방법을 관리할 수 있고, 리소스에 따라 여러 사람에게 다양한 권한을 부여할 수 있음.  
> * 예를 들어, 어떤 사용자에게는 Amazon EC2, Amazon S3, Amazon DynamoDB, Amazon Redshift 및 기타 AWS 서비스에 대한 모든 액세스 권한을 허용하고, 다른 사용자에게는 일부 S3 버킷에 대한 읽기 전용 액세스만 허용할 수 있음.  
> * 마찬가지로, 또 다른 사용자에게는 특정 EC2 인스턴스만 관리할 수 있는 권한을 부여할 수 있음. 일부 사용자에게 계정 결제 정보에만 액세스할 수 있고, 다른 항목에는 액세스할 수 없는 권한을 부여할 수도 있음.  

> * IAM은 AWS 계정의 기능 중 하나이며, **추가 비용 없이 제공되는 기능임.**
---
### 2. IAM: 필수 구성 요소
**1) IAM 사용자**
> * IAM 사용자는 AWS 계정에 정의되어 있고, AWS 제품에 대한 API 호출을 수행해야 하는 사람 또는 애플리케이션임.  
> * 각 사용자 에게는 **AWS 계정 내에서 고유한 이름**(공백이 없어야 함)과 **다른 사용자와 공유되지 않는 보안 자격 증명 세트**가 있어야 함.  
> * 이러한 자격 증명은 AWS 계정 루트 사용자 보안 자격 증명과는 다름. 각 사용자는 하나의 AWS 계정에만 정의됨.  

**2) IAM 그룹**
> * IAM 그룹은 IAM 사용자의 모음임.  
> * IAM 그룹을 사용하면 여러 사용자의 권한을 지정하고 관리하는 작업을 간소화할 수 있음.  

**3) IAM 정책**
> * IAM 정책은 **사용자가 AWS 계정에서 수행할 수 있는 작업을 결정하는 권한**이 정의된 문서임.  
> * 정책은 일반적으로 특정 리소스에 대한 액세스 권한을 부여하고 사용자가 해당 리소스로 수행할 수 있는 작업을 지정함.  
> * 정책은 액세스를 명시적으로 거부할 수도 있음.  

**4) IAM 역할**
> * IAM 역할은 AWS 계정의 특정 AWS 리소스에 대한 임시 액세스 권한을 부여하는 도구임.  
---
### 3. 액세스가 가능한 IAM 사용자로 인증
**인증**: 사용자 또는 시스템에 먼저 자격 증명을 증명할 것을 요구하는 기본적인 컴퓨터 보안 개념  

**IAM 사용자를 정의할 때는 이 사용자가 AWS 리소스에 액세스할 때 사용할 수 있는 액세스 유형을 선택함.**  
> **1) 프로그래밍 방식**  
> > * 프로그래밍 방식 액세스를 부여하는 경우, IAM 사용자는 액세스 키 ID와 보안 액세스 키를 제시한 후에 AWS CLI, AWS SDK 또는 다른 개발 도구를 사용하여 AWS API 호출을 수행할 수 있음.  

> **2) AWS Management Console**  
> > * AWS Management Console 액세스를 부여하는 경우, IAM 사용자는 브라우저 로그인 창에 나타나는 필드를 입력해야 함.  
> > * 12자리 계정 ID E또는 해당 계정 별칭을 제공하라는 메시지가 표시되고, 사용자는 IAM 사용자 이름과 암호도 입력해야 함.  
> > * 사용자에 대해 MFA(Multi-Factor Authentication)가 활성화된 경우에는 인증 코드를 입력하라는 메시지도 표시됨.  

**사용자는 프로그래밍 방식의 액세스만 할당하거나 콘솔 액세스만 할당하거나 두 유형의 액세스를 모두 할당할 수 있음.**   

---
### 4. IAM MFA
> * AWS 서비스 및 리소스에는 AWS Management Console, AWS CLI 또는 SDK 및 API를 사용하여 액세스할 수 있음.  
> * 보안 향상을 위해 MAF를 활성화하는 것이 좋음.  

> * MFA를 사용하는 경우, 사용자 및 시스템은 일반 로그인 자격 증명에 더해 **MFA 토큰**을 제공해야 AWS 서비스 및 리소스에 액세스할 수 있음.  

> * MFA 인증 토큰 생성에 사용할 수 있는 옵션으로는 **가상 MFA 호환 애플리케이션**(ex.Google Authenticator 또는 Authy-2-Factor Authentication), **U2F 보안 키 디바이스 및 하드웨어 MFA 디바이스**가 있음.  
---
### 5. 권한 부여: 허용되는 작업
> * 권한 부여는 사용자, 서비스 또는 애플리케이션에 부여해야 하는 권한을 결정하는 프로세스임.  
> * 사용자는 인증 후 AWS 서비스에 액세스할 수 있는 권한을 부여받아야 함.  

> * 기본적으로 IAM 사용자에게는 AWS 계정의 리소스나 데이터에 액세스할 수 있는 권한이 없음.  
> * 대신 JSON(JavaScript Object Notation)형식의 문서인 정책을 생성하여 사용자, 그룹 또는 역할에 권한을 명시적으로 부여해야 함.  
> * 정책은 **AWS 계정의 리소스에 대한 액세스를 허용하거나 거부하는 권한**을 나열함.  
---
### 6. IAM: 











