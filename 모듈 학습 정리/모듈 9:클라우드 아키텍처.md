# 모듈 9: 클라우드 아키텍처

## 개요

### 주제
* AWS Well-Architected 프레임워크
* 안정성 및 고가용성
* AWS Trusted Advisor

### 목표
* 5가지 원칙을 포함한 AWS Well-Architected 프레임워크 설명
* AWS Well-Architected 프레임워크의 설계 원칙 확인
* 안정성 및 고가용성의 중요성 설명
* AWS Trusted Advisor의 이점 확인
* AWS Trusted Advisor 권장 사항 해석

## 섹션 1: AWS Well-Architected 프레임워크

### 1. 아키텍처: 설계 및 구축
* 아키텍처는 큰 구조물을 설계하고 구축하는 예술이자 과학임. 대규모 시스템의 아키텍트는 **시스템의 규모와 복잡성을 관리**해야 함.  

* 클라우드 아키텍트는 다음과 같은 일을 함.  
> * 의사 결정권자와 협력하여 **비즈니스 목표와 개선이 필요한 기능을 식별**함.  
> * 솔루션의 **기술 결과물이 비즈니스 목표와 일치하는지 확인**함.  
> * 솔루션을 구현하는 제공 팀과 협력하여 **기술의 기능이 적절한지 확인**함.  

* Well-Architected 시스템을 갖추면 비즈니스 성공의 가능성이 크게 높아짐.  
---
### 2. AWS Well-Architected 프레임워크란?
* AWS Well-Architected 프레임워크는 클라우드 애플리케이션 및 워크로드를 위한 최고 수준의 보안, 고성능, 복원력 및 효율성을 갖춘 **인프라를 구축하는 데 도움이 되는 안내서**임.  
* 이 프레임워크는 클라우드 아키텍처를 평가하고 구현하는 데 도움이 될 수 있는 기본적인 질문과 모범 사례 세트를 제공함.  
* AWS는 수많은 고객의 AWS 기반 아키텍처를 검토한 끝에 Well-Architected 프레임워크를 개발하였음.  
---
### 3. AWS Well-Architected 프레임워크의 원칙

<img src="https://velog.velcdn.com/images/chan9708/post/cf0b7c6c-ef35-4b88-a22e-85435e73f664/image.png" width="700">

* AWS Well-Architected 프레임워크는 **운영 우수성, 보안성, 안정성, 성능 효율성, 비용 최적화 등** 5가지 원칙으로 구성됨.  
* **원칙 구성**  
> * 각 원칙에는 설계 원칙과 모범 사례 영역이 포함되어 있음.  
> * 기본 질문 세트는 각 모범 사례 영역에 있음.  
> * 각 질문에는 약간의 컨텍스트와 모범 사례 목록이 제공됨.  
---
### 4. AWS Well-Architected 프레임워크 설계 원칙 활동 소개
* 각 원칙에 대한 AWS Well-Architected 프레임워크 설계 원칙을 기준으로 **가상 회사의 아키텍처를 검토함**.  

**1) AnyCompany 배경 정보**  
> * 2008년에 John Doe가 설립.  
> * 주변의 개별 건물과 나무를 보여주는 고급 3D 프린팅 도시 경관 모델을 판매함. (도시 경관은 컬러로 인쇄되며, 모든 물체가 정확한 색으로 인쇄됨.)  

> * IPO(기업 공개) 전까지 민간 투자를 신청하려고 함.  
> * John Doe와 이사회의 요청에 따라 기술 플랫폼을 독립적으로 검토하여 실사를 통과할 수 있는지 확인해야 함.  
  
> * John Doe는 클라우드 컴퓨팅을 사용하는 데 관심이 있음. 2008년에 AWS 계정을 만들고, Amazon EC2 인스턴스를 처음으로 가동했음.  
> * AnyCompany 플랫폼 아키텍처는 수년에 걸쳐 점진적으로 발전하였음. 현재 회사에서는 기술자 5명으로 구성된 팀이 모든 기술을 작성하고 운영함.  
> * 핵심 코드는 John Doe가 작성하지만, 나머지 팀원에게 AWS 계정 루트 사용자 자격 증명을 주고 관리를 맡겼음.  


> * AnyCompany Corporation에는 3개의 주요 부서가 있음.  
> > * **Fly and Snap**: 이미지 획득, 사전 처리 및 저장  
> > * **Show and Sell**: 홍보, 판매 및 고객 지원  
> > * **Make and Ship**: 제품 제조 및 배송  

> **AnyCompany 플랫폼의 설계를 개괄적으로 보면 회사의 조직 구조와 비슷함.**  

**2) AnyCompany 아키텍처: Fly and Snap - 이미지 획득, 사전 처리 및 저장**

> * 경비행기에 탑재된 여러 디바이스가 지역의 명소를 비롯한 주요 도시의 이미지를 일정에 따라 캡처함.  
> * 각 디바이스에서는 경비행기의 시계와 동기화된 시계로 타임스탬프가 기록된 **이미지 자산**이 생성됨.  
> * 각 디바이스에서 생성된 이미지 자산은 외부 **스토리지 어레이**가 있는 온보드 **캡처 머신**으로 스트리밍됨.  
> * 캡처 머신은 경비행기의 비행 시스템에 연결되며 GPS, 나침반, 고도 같은 네비게이션 데이터를 지속적으로 캡처함.  

> * 기지로 돌아온 후에는 스토리지 어레이가 분리되고 수집 베이로 들어감. 여기서 스토리지 어레이는 수집 머신에 연결됨.  
> * 수집 머신은 스토리지 어레이의 압축 아카이브를 생성하고 FTP를 사용하여 EC2 인스턴스의 **사전 처리 머신**으로 아카이브를 전송함.  
> * 스토리지 어레이가 처리된 후, 아카이브는 테이프에 백업용으로 기록됨. 이후 스토리지 어레이가 지워지고 다음 비행을 위해 준비됨.  
> * 테이프는 타사 백업 공급자가 오프사이트에 보관함.  

> * 사전 처리 머신은 머신에 업로드된 새 데이터 세트를 주기적으로 처리함.  
> * 모든 이미지 자산을 추출하여 Amazon S3 버킷에 저장함. 이미지 서비스에 파일에 대한 알림을 보내고 비행 정보를 제공함.  
> * 이미지 서비스는 비행 정보를 사용하여 모든 비행 시점의 3D 방향 및 위치를 계산한 후, 이미지 파일의 타임 스탬프에 연결함.  
> * 이 정보는 Amazon S3에 있는 이미지 자산에 대한 링크와 함께 Amazon EC2 기반의 RDBMS(관계형 데이터베이스 관리 시스템)에 저장됨.  

**3) AnyCompany 아키텍처: Show and Sell - 홍보, 판매 및 고객 지원**  

> * AnyCompany 웹 사이트에 방문하는 고객은 물리적 제품의 이미지와 동영상을 볼 수 있음. 이러한 이미지의 형식은 다양함.  
> * 웹 사이트에는 Elastic Load Balancing 및 HTTPS와 콘텐츠 관리 시스템을 실행하는 EC2 인스턴스의 Auto Scaling 그룹이 사용됨.  
> * 정적 웹 사이트 자산은 **S3 버킷**에 저장됨.  

> * 고객은 지도에서 위치를 선택하고 도시 경관을 동영상으로 미리 볼 수 있음.  
> * 또한 지도의 물리적 크기, 색 구성표를 선택하고 지도에 LED 구멍을 배치하여 전광 지도를 제작할 수 있음.  
> * 매핑 서비스는 웹 사이트의 지도 위치 입력과 이미지 서비스를 상호 관련하여 해당 위치에서 이미지를 사용할 수 있는지 확인함.  

> * 평가판에 만족한 고객은 도시 사진을 주문할 수 있음.  
> * 고객은 신용 카드로 결제함. 신용 카드 주문은 PCI를 준수하는 인증된 타사 공급자에서 처리함. AnyCompany는 신용 카드 정보를 처리하거나 저장하지 않음.  
> > **PCI(Payment Card Industry)**: 신용 카드 데이터에 대한 통제를 강화하여 사기를 방지하도록 고안된 글로벌 정보 보안 표준  

> * 결제 확인이 수신된 후, 웹 사이트는 주문 서비스에 주문을 프로덕션으로 푸시할 것을 지시함.  
> * 고객의 세부 정보를 포함한 주문은 Amazon EC2 기반 RDBMS인 **Show and Sell 데이터베이스**에 기록됨.  

> * 동영상 미리 보기 또는 주문의 전체 인쇄를 시작하기 위해 **주문 서비스**는 **프로덕션 대기열**에 메시지를 배치함. 
> * 그러면 **렌더링 서비스**에서 미리 보기 동영상을 제공할 시기를 표시함.  
> * 또한 **주문 서비스**는 **주문 상태 대기열**을 읽고 **Show and Sell 데이터베이스**에 상태 변경을 기록함.  
> * 고객은 제조 중에 주문을 추적하고 발송된 날짜를 확인할 수 있음. 이 작업은 타사에서 브로커 디스패치 서비스를 통해 처리함.  

**4) AnyCompany 아키텍처: Make and Ship - 제품 제조 및 배송**  

> * AnyCompany에는 사진과 동영상의 조합으로 3D 모델을 생성할 수 있는 독점 기술이 있음(동작에서 구조 추출).

> * 렌더링 서비스는 g2.2xlarge 인스턴스로 구성된 플릿이며, **프로덕션 대기열**에서 주문을 가져와서 3D 모델을 생성한 후 **S3 버킷**에 저장함.  
> * 또한 렌더링 서비스는 이 3D 모델을 사용하여 비행 동영상을 제작함. 고객은 AnyCompany 웹 사이트에서 이 비행 동영상을 통해 주문을 미리 볼 수 있음.  
> * 동영상은 별도의 S3 버킷에 저장됨. 팀은 일년에 한 번 오래된 미리 보기를 삭제하지만, 모델은 향후 프로젝트에 필요한 경우를 대비하여 보관됨.  

> * 고객이 주문을 제출하면 메시지가 3D 모델에 대한 링크와 함께 인쇄 대기열에 배치됨.  
> * Make and Ship 프로세스의 각 단계에서 주문 상태 업데이트는 주문 상태 대기열에 게시됨.  
> * AnyCompany 웹 사이트에서는 이 대기열을 사용하여 주문 기록을 보여줌.  

> * Make and Ship 팀에는 고해상도의 세부 색 조절 모델을 인쇄하는 3D 프린터가 4대가 있음.  
> * 온프레미스 **인쇄 컨덕터 머신**은 **인쇄 대기열**에서 주문을 가져와서 사용 가능한 다음 프린터로 전송하고, **인쇄 컨덕터**는 주문 업데이트를 **주문 상태 대기열**로 전송함.  
> * 주문이 완료되고 품질 보증에 통과한 후 발송 준비가 되면 **인쇄 컨덕터**가 최종 업데이트를 전송함.  
---
**활동 개요**  
> 각 Well-Architected 프레임워크 질문에 대해 AnyCompany 아키텍처에 대한 다음 질문에 답해야 함.  
> > * 현재 상태(AnyCompany의 현재 방식)는 어떻습니까?  
> > * 미래 상태(AnyCompany가 앞으로 해야 할 일)는 무엇입니까?   

> 그런 다음 질문에 대한 답변을 바탕으로 AnyCompany에서 개선이 시급한 영역을 협의를 통해 도출해야 함.  
---

### AWS Well-Architected 프레임워크의 원칙 1: 운영 우수성 원칙  
**1) 운영 우수성 원칙**  
> * 운영 우수성 원칙에는 비즈니스 가치를 실현하고 지원 프로세스 및 절차를 지속적으로 개선하기 위해 **시스템을 실행 및 모니터링하는 기능**이 포함됨.  
> * 변경 관리 및 자동화, 이벤트 응답, 일일 운영 관리를 위한 표준 정의와 같은 주제를 주로 다룸.  

**2) 운영 우수성 설계 원칙**  
> * 클라우드에서 운영 우수성을 달성할 수 있는 6가지 설계 원칙은 아래와 같음.  
> > **1. 코드로 작업 수행**  
> > > * 전체 워크로드(애플리케이션, 인프라)를 코드로 정의하고 코드로 업데이트함.  
> > > * 작업 절차를 코드로 구현하고 이벤트에 대한 응답으로 자동 트리거되도록 구성함.  
> > > * 코드로 작업을 수행하면 **인적 오류를 제한하고 이벤트에 일관되게 응답할 수 있음**.  
> >  
> > **2. 설명서 주석 달기**  
> > > * 빌드가 나올 때마다 주석이 추가된 설명서를 자동으로 생성함.  
> > > * 주석이 추가된 시스템은 사람과 시스템이 사용할 수 있음.  
> > > * 주석을 작업 코드에 대한 입력으로 사용할 수 있음.  
> >   
> > **3. 작은 규모의 취소 가능한 변경을 빈번하게 수행**  
> > > * 구성 요소의 주기적 업데이트가 가능하도록 워크로드를 설계함.  
> > > * 실패할 경우 되돌릴 수 있는 작은 단위로 변경을 수행함. (가능한 경우 고객에게 영향을 주지 않아야 함.)  
> >   
> > **4. 작업 절차를 자주 개선**  
> > > * 작업 절차를 개선할 수 있는 기회를 찾음.  
> > > * 워크로드 변화에 따라 절차를 적절히 변경함.  
> > > * 정기적인 게임 데이를 설정하여 모든 절차를 검토하고, 절차의 효과를 검증하며, 팀이 절차를 제대로 숙지하고 있는지 확인함.  
> >   
> > **5.실패 예상**
> > > * 가능한 실패 원인을 식별하여 사전에 제거하거나 완화함.  
> > > * 실패 시나리오를 테스트하고 각 시나리오의 영향을 이해하고 있는지 확인함.  
> > > * 대응 절차를 테스트하여 절차가 효과적이고 팀이 제대로 이행할 수 있는지 확인함.  
> > > * 정기적인 게임 데이를 설정하여 워크로드를 테스트하고 시뮬레이션된 이벤트에 대한 팀의 대응을 테스트함.  
> >   
> > **6. 모든 운영 실패를 교훈으로 삼기**  
> > > * 모든 운영 이벤트 및 실패에서 얻은 교훈을 통해 개선을 주도함.  
> > > * 배운 내용을 팀과 전체 조직에서 공유함.  

**3) 운영 우수성 관련 질문**  
> * 운영 우수성에 대한 기본적인 질문은 **준비, 운영 및 개선**이라는 3가지 모범 사례 영역과 관련됨.  
> * 사용자는 질문에 대한 답변을 통해서 무엇이 필요하고, 무엇을 해야하는 지를 알고 수행할 수 있음.  
> * 각 영역에서 질문들이 의미하는 바는 다음과 같음.  

> **1. 준비**  
> > * 운영 팀에서 효과적이고 효율적으로 비즈니스 결과를 지원하려면 비즈니스 및 고객의 요구를 이해해야 함.  
> > * 운영 팀은 운영 이벤트에 대응하는 절차를 만들고 사용하며 절차가 효과적으로 비즈니스 요구 사항을 지원하는지 검증함.  

> **2. 운영**  
> > * 운영 팀은 원하는 비즈니스 결과의 달성 여부를 측정하는 데 사용할 지표를 수집함.  

> **3. 개선**  
> > * 비즈니스 상황, 비즈니스 우선 순위 및 고객의 요구 사항은 시간에 따라 달라짐.  
> > * 따라서 변화에 따라 개선이 가능한 운영 절차를 설계하고 절차를 수행한 후 얻은 교훈을 절차에 포함하는 것이 중요함.  

**4) 활동 브레이크 아웃**  
> * AWS Well-Architected 프레임워크의 다음 3가지 운영 우수성 관련 질문을 검토함.  
> > * OPS 2: 워크로드 상태를 파악할 수 있으려면 워크로드를 어떻게 설계해야 합니까?  
> > * OPS 4: 배포 위험을 완화하는 방법은 무엇입니까?  
> > * OPS 5: 워크로드를 지원할 준비가 되었는지 어떻게 알 수 있습니까?  
---
### AWS Well-Architected 프레임워크의 원칙 2: 보안 원칙  
**1) 보안 원칙**  
> * 보안 원칙에서는 **정보, 시스템 및 자산을 보호하면서 위험 평가 및 완화 전략**을 통해 비즈니스 가치를 실현하는 역량에 중점을 둠.  
> * 데이터의 기밀성 및 무결성 보호, 사용자가 수행할 수 있는 작업 식별 및 관리(또는 권한 관리), 시스템 보호 및 보안, 이벤트 탐지 제어 설정과 같은 주제를 주로 다룸.  

**2) 보안 설계 원칙**  
> * 보안을 강화할 수 있는 7가지 설계 원칙은 다음과 같음.  
> > **1. 자격 증명을 위한 강력한 기반 구현**  
> > > * 최소 권한의 원칙을 구현하고 직무 분리를 시행함.  
> > > * AWS 리소스와의 모든 상호 작용에 적절한 권한을 부여함.  
> > > * 권한 관리를 중앙 집중화하여 장기 자격 증명에 대한 의존을 줄이거나 제거함.  
> >   
> > **2. 추적 기능 활성화**  
> > > * 환경에서 수행되는 작업과 변경 사항에 대한 실시간 모니터링, 알림 및 감사 기능을 사용함.  
> > > * 로그와 지표를 시스템에 통합하여 자동으로 대응하고 조치를 취함.  
> > 
> > **3. 모든 계층에서 보안 적용**  
> > > * 심층 방어를 적용하고 아키텍처의 모든 계층(ex.엣지 네트워크, VPC, 서브넷 및 로드 밸런서, 모든 인스턴스, 운영 체제 및 애플리케이션)에 보안 제어를 적용함.  
> > 
> > **4. 보안 모범 사례 자동화**  
> > > * 보안 메커니즘을 자동화하여 확장 및 축소를 신속하고 경제적이며 안전하게 수행하는 기능을 개선함.  
> > > * 안전한 아키텍처를 생성하고, 버전이 관리되는 템플릿에서 코드로 정의되고 관리되는 제어 기능을 구현함.  
> > 
> > **5. 전송 데이터 및 유휴 데이터 보호**  
> > > * 데이터를 민감도에 따라 분류하고 암호화, 토큰화 및 액세스 제어와 같은 메커니즘을 적절히 사용함.  
> > 
> > **6. 데이터 액세스 차단**  
> > > * **데이터에 직접 액세스하거나 데이터를 수동으로 처리해야 하는 필요성**을 줄이거나 이러한 필요를 없애는 메커니즘과 도구를 만듦.  
> > 
> > **7. 보안 이벤트 대비**  
> > > * 조직의 요구 사항에 적합한 인시던트 관리 프로세스를 마련함.  
> > > * 인시던트 대응 시뮬레이션을 실행하고 자동화를 포함한 도구를 사용하여 탐지, 조사 및 복구 속도를 높임.  

**3) 보안 관련 질문**  
> * 보안에 대한 기본적인 질문은 **자격 증명 및 액세스 관리, 탐지 제어, 인프라 보호, 데이터 보호, 인시던트 대응**의 5가지 모범 사례 영역과 관련됨.  

> * 시스템을 설계하기 전에 보안 사례를 설정해야 함.  
> * 누가 무엇을 할 수 있는지 제어할 수 있어야 함. 또한 보안 인시던트를 식별하고, 시스템과 서비스를 보호하며, 데이터 보호를 통해 데이터의 기밀성과 무결성을 유지할 수 있어야 함.  
> * 올바르게 정의되고 시행되는 보안 인시던트 대응 프로세스가 있어야 함.  

**4) 활동 브레이크 아웃**  
> * AWS Well-Architected 프레임워크의 다음 3가지 보안 관련 질문을 검토함.  
> > * SEC 1: 자격 증명 및 인증을 어떻게 관리합니까?  
> > * SEC 4: 보안 이벤트를 어떻게 탐지하고 조사합니까?   
> > * SEC 7: 컴퓨팅 리소스는 어떻게 보호할 수 있습니까?  
---

### AWS Well-Architected 프레임워크의 원칙 3: 안정성 원칙  

**1) 안정성 원칙**  
> * 안정성 원칙은 인프라 또는 서비스 장애로부터 복구하고, 수요에 맞춰 컴퓨팅 리소스를 동적으로 확보하며, 잘못된 구성이나 일시적인 네트워크 문제와 같은 중단을 완화하는 시스템의 기능에 중점을 둠.  
> * 설정, 교차 프로젝트 요구 사항, 복구 계획 및 변경 처리와 같은 주제를 주로 다룸.  

**2) 안정성 설계 원칙**  
> * 안정성을 높일 수 있는 5가지 설계 원칙은 다음과 같음.  
> > **1. 복구 절차 테스트**  
> > > * 시스템 장애를 테스트하고 복구 절차를 검증함.  
> > > * 자동화를 사용하여 다양한 장애를 시뮬레이션하거나 이전에 장애로 이어졌던 시나리오를 재현함.  
> > > * 이렇게 하면 장애 경로를 파악하여 실제 장애 시나리오가 발생하기 전에 테스트하고 교정할 수 있음.  
> > 
> > **2. 장애 시 자동 복구**  
> > > * 시스템의 주요 성능 지표를 모니터링하고 임계값 위반 시 자동 복구를 트리거하도록 시스템을 구성함.  
> > > * 이 방법을 사용하면 자동 알림 및 장애 추적 기능을 활성화하고 장애를 해결하거나 복구하는 자동 복구 프로세스를 지원할 수 있음.  
> > 
> > **3. 수평적 확장을 통한 전체 시스템 가용성 증대**  
> > > * 단일의 대규모 리소스를 다수의 소규모 리소스로 대체하고 이러한 소규모 리소스에 요청을 분산하여 단일 지점의 장애가 전체 시스템에 미치는 영향을 줄임.  
> > 
> > **4. 용량을 추정하지 말 것**  
> > > * 수요 및 시스템 사용량을 모니터링하고 리소스 추가 또는 제거를 자동화하여 수요를 충족하는 최적의 수준을 유지함.  
> > 
> > **5. 자동화 기능의 변경 관리**  
> > > * 자동화를 사용하여 인프라 변경을 수행하고 자동화 기능의 변경을 관리함.  

**3) 안정성 관련 질문**  
> * 안정성에 대한 기본적인 질문은 **기반, 변경 관리 및 장애 관리**의 3가지 모범 사례 영역과 관련됨.  

> **1. 기초**  
> > * 안정성을 달성하려면 시스템에 제대로 계획된 기반과 모니터링 기능이 있어야 함.  

> **2. 변경 관리**  
> > * 수요 또는 요구 사항의 변경을 처리하는 메커니즘이 있어야 함.  

> **3. 장애 관리**  
> > * 시스템은 장애를 감지하고 자동으로 자가 복구를 수행하도록 설계되어야 함.  

**4) 활동 브레이크 아웃**  
> * AWS Well-Architected 프레임워크의 다음 3가지 안정성 관련 질문을 검토함.  
> > * REL 2: 네트워크 토폴로지는 어떻게 관리합니까?  
> > * REL 3: 시스템은 수요 변화에 어떻게 적응합니까?   
> > * REL 6: 데이터는 어떻게 백업합니까?  
---
### AWS Well-Architected 프레임워크의 원칙 4: 성능 효율성 원칙  

**1) 성능 효율성 원칙**  
> * 성능 효율성 원칙은 **IT 및 컴퓨팅 리소스를 효율적으로 사용하여 시스템 요구 사항을 충족**하고, 수요 변화 또는 기술 개선에 따라 **이러한 효율성을 유지하는 역량**에 중점을 둠.  
> * 워크로드 요구 사항에 **적합한 리소스 유형 및 크기를 선택**하는 방법, **성능을 모니터링**하는 방법 및 정보 기반 의사 결정을 통해 **변화하는 비즈니스 환경에서 효율성을 유지**하는 방법 등을 주로 다룸.  

**2) 성능 효율성 설계 원칙**  
> * 성능 효율성을 개선할 수 있는 5가지 설계 원칙은 다음과 같음.  
> > **1. 고급 기술의 민주화**  
> > > * 기술을 서비스 형태로 소비함.  
> > > * 예를 들어, NoSQL 데이터베이스, 미디어 트랜스코딩, 기계 학습 같은 기술은 기술 커뮤니티에서 쉽게 찾을 수 없는 전문성이 요구되는 기술임.  
> > > * 클라우드에서는 이러한 기술을 서비스로 사용할 수 있음. 
> > > * 기술을 소비함으로써 팀은 리소스 프로비저닝 및 관리 대신 제품 개발에 집중할 수 있음.  
> > 
> > **2. 신속한 글로벌 배포**  
> > > * 여러 AWS 리전에 시스템을 배포하여 지연 시간을 줄이고 최소한의 비용으로 고객 경험을 개선함.  
> > 
> > **3. 서버리스 아키텍처 사용**  
> > > * 서버리스 아키텍처에서는 **서버 실행 및 유지 관리로 인한 운영 부담 없이** 기존의 컴퓨팅 활동을 수행할 수 있음.  
> > > * 관리형 서비스는 대규모로 운영되기 때문에 서버리스 아키텍처에서는 트랜잭션 비용도 절감됨.  
> > 
> > **4. 자주 실험**  
> > > * 다양한 유형의 인스턴스, 스토리지 또는 구성을 비교하는 테스트를 수행함.  
> > 
> > **5. 적합한 기술을 파악**  
> > > * 목표를 달성하기에 가장 적합한 기술 접근 방식을 사용함.  
> > > * 예를 들어, 데이터베이스 또는 스토리지에 대한 접근 방식을 선택할 때는 데이터 액세스 패턴을 고려함.  

**3) 성능 효율성 관련 질문** 
> * 성능 효율성에 대한 기본적인 질문은 **선택, 검토, 모니터링 및 절충**의 4가지 모범 사례 영역과 관련됨.  

> * 데이터를 사용하여 고성능 아키텍처를 설계하고 구축함.  
> **1. 선택**  
> > * 설계 개요부터 리소스 유형의 선택 및 구성까지 아키텍처의 모든 측면에 관한 데이터를 수집함.  

> **2. 검토**  
> > * 선택 사항을 주기적으로 검토하여 새로운 AWS 서비스를 활용하고 있는지 확인함.  

> **3. 모니터링**  
> > * 모니터링을 수행하여 예상 성능과의 차이를 파악하고 즉각적인 조치를 통해 문제를 해결함.  

> **4. 절충**  
> > * 마지막으로 아키텍처 설계 시 여러 측면을 절충하여 성능을 개선함.  
> > * 예를 들어, 압축을 사용하거나, 캐싱을 사용하거나, 일관성 요구 사항을 완화함.  

**4) 활동 브레이크 아웃**  
> * AWS Well-Architected 프레임워크의 다음 3가지 성능 효율성 관련 질문을 검토함.  
> > * PERF 1: 최고 성능을 제공하는 아키텍처는 어떻게 선택합니까?    
> > * PERF 2: 컴퓨팅 솔루션은 어떻게 선택합니까?    
> > * PERF 4: 데이터베이스 솔루션은 어떻게 선택합니까?  
---
### AWS Well-Architected 프레임워크의 원칙 5: 비용 최적화 원칙  

**1) 비용 최적화 원칙**  
> * 비용 최적화 원칙은 **최소한의 시스템 실행 비용으로 비즈니스 가치를 실현**하는 역량에 중점을 둠.  
> * 지출 영역 파악 및 제어, 가장 적절하고 적합한 수의 리소스 유형 선택, 시간대별 지출 분석과 초과 지출 없이 비즈니스 요구 사항에 맞춘 크기 조정 같은 항목을 주로 다룸.  

**2) 비용 최적화 설계 원칙**  
> * 비용을 최적화할 수 있는 5가지 설계 원칙은 다음과 같음.  
> > **1. 소비 모델 도입**  
> > > * 필요한 컴퓨팅 리소스에 대해서만 비용을 지불함.  
> > > * 정교한 예측을 사용하는 대신 비즈니스 요구 사항에 따라 사용량을 늘리거나 줄임.  
> > 
> > **2. 전체 효율성 측정**  
> > > * 워크로드의 비즈니스 결과를 측정하고 이 결과를 실현하는 것과 관련된 비용을 측정함.  
> > > * 이 측정을 사용하여 결과를 늘리고 비용을 줄여 얻을 수 있는 이점을 파악함.  
> > 
> > **3. 데이터 센터 운영에 대한 비용 지출 중단**  
> > > * AWS는 서버를 랙에 설치하고, 스태킹하고, 전원을 공급하는 등의 작업 부담을 덜어 줌.  
> > > * 따라서 IT 인프라가 아니라 고객과 비즈니스 프로젝트에 집중할 수 있음.  
> > 
> > **4. 비용 분석 및 속성 파악**  
> > > * 클라우드에서는 손쉽게 시스템 사용량과 비용을 정확히 파악하고 IT 비용을 개별 워크로드 소유자에게 알릴 수 있음.  
> > > * 이 기능을 통해 ROI(투자 수익률)을 측정할 수 있으며, 워크로드 소유자에게는 리소스를 최적화하고 비용을 줄이는 기회가 제공됨.  
> > 
> > **5. 애플리케이션 수준의 관리형 서비스를 사용하여 소유 비용 절감**  
> > > * 애플리케이션 수준의 관리형 서비스는 이메일 전송 또는 데이터베이스 관리와 같은 작업을 지원할 서버를 유지 관리하는 운영 부담을 줄여줌.  
> > > * 관리형 서비스는 클라우드 규모에서 운영되기 때문에 클라우드 서비스 공급자가 더 저렴한 트랜잭션 또는 서비스당 비용을 제공할 수 있음.  

**3) 비용 최적화 관련 질문**  
> * 비용 최적화에 대한 기본 질문은 **비용 인식, 비용 효율적인 리소스, 공급과 수요의 균형, 시간 경과에 따른 최적화**라는 4가지 모범 사례 영역으로 분류할 수 있음.  

> * 다른 원칙과 마찬가지로 비용을 평가할 때 고려해야 할 장단점이 있음.  
> * 예를 들어, 선결제 방식의 비용 최적화 서비스에 투자하는 대신 빠른 시장 출시, 새로운 기능 제공, 마감 기한 충족 등 속도를 최우선으로 할 수 있음.  
> * 또 다른 예로, 더 높은 수준의 가용성을 보장하는 애플리케이션을 설계하려면 일반적으로 비용이 더 많이 듦.  
> * **실제 애플리케이션 요구 사항을 파악**하고 **경험적 데이터를 이용**하여 아키텍처 설계 결정을 알려야 함.  
> * 벤치마킹을 수행하여 시간 경과에 따라 워크로드의 비용이 최적화되도록 함.  
> > **벤치마킹**: 측정의 기준이 되는 대상을 설정하고 그 대상과 비교 분석을 통해 장점을 따라배우는 행위  

**4) 활동 브레이크 아웃**  
> * AWS Well-Architected 프레임워크의 다음 3가지 비용 최적화 관련 질문을 검토함.  
> > * COST 1: 사용량을 제어하는 방법은 무엇입니까?    
> > * COST 5: 리소스 유형 및 크기 선택 시 비용 목표를 달성하는 방법은 무엇입니까?    
> > * COST 6: 비용 절감을 위한 가격 정책 모델을 사용하는 방법은 무엇입니까?  
---
### 5. AWS Well-Architected Tool  
> * 방금 위에서 완료한 활동은 **AWS Well-Architected Tool**을 사용하는 방식과 비슷함.  

> * AWS Well-Architected Tool은 워크로드 상태를 검토하고 최신 AWS 아키텍처 모범 사례와 비교하는 데 도움을 줌.  
> * 또한 필요할 때마다 **AWS 아키텍트가 사용하는 지식과 모범 사례**에 대한 무료 액세스를 제공함.  

> * 이 도구는 **AWS Management Console**에서 사용할 수 있음.  
> * 워크로드를 정의하고 AWS Well-Architected Framework에 정의되어 있는 **운영 우수성, 보안, 안정성, 성능 효율성, 비용 최적화**영역에서 일련의 질문에 답함.  
> * 그러면 AWS Well-Architected Tool이 클라우드의 워크로드를 개선하는 방법에 대한 단계별 지침이 포함된 실행 계획을 제공함.  

> * AWS Well-Architected Tool은 **클라우드 아키텍처를 검토하고 측정하는 일관된 프로세스**를 제공함.  
> * 도구에서 제공하는 결과를 사용하여 개선을 위한 다음 단계를 파악하고, 아키텍처 관련 의사결정을 내리고, 아키텍처 관련 고려 사항을 기업 거버넌스 프로세스에 적용할 수 있음.  
#

## 섹션 2: 안정성 및 가용성  

### "모든 것에서 항상 장애가 생깁니다.(Everything fails, all the time)."
> * Amazon의 CTO인 'Werner Vogels'는 "모든 것에서 항상 장애가 발생한다."고 말함.  
> * AWS Well-Architected 프레임워크에서 제시하는 모범 사례 중 하나는 장애(또는 애플리케이션/워크로드 가동 중지)에 대비한 계획을 수립하는 것임.  
> * 이를 위한 한 가지 방법은 장애를 견디도록 애플리케이션과 워크로드를 설계하는 것임.  
> * 클라우드 아키텍트가 장애를 견디도록 아키텍처를 설계할 때 고려하는 두 가지 중요한 요소는 **안정성과 가용성**임.  
---
### 1. 안정성  
> * 안정성은 **사용자가 원하는 경우 기능을 제공할 수 있는 시스템의 능력**을 측정하는 척도임.  
> * "모든 것에서 항상 장애가 발생"하므로 통계적 방식으로 안정성을 생각해야 함.  
> * 안정성은 **일정 기간 동안 전체 시스템이 정상적으로 작동할 확률**임.  
> * 시스템에는 하드웨어, 펌웨어 및 소프트웨어와 같은 여러 시스템 구성 요소가 포함되어 있음.  
> * 이러한 시스템 구성 요소의 장애는 시스템의 가용성에 영향을 미침.  

> * 자동차를 예로 설명하면 안정성을 쉽게 이해할 수 있음.  
> * 자동차는 시스템에 해당함. 자동차의 각 부품(ex.냉각,점화,브레이크 등)이 유기적으로 작동해야 자동차가 제대로 작동함.  
> * 자동차의 시동을 걸 때 점화가 실패하면 어디로도 운전해 갈 수 없음. **즉, 자동차가 가용 상태가 아님.**  
> * 점화가 반복적으로 실패하면 자동차는 안정성이 낮은 것으로 간주됨.  

> * 안정성을 측정하는 일반적인 방법은 MTBF(평균 장애 간격)와 같은 통계 측정값을 사용하는 것임.  
> > **MTBF(Mean Time Between Failures)**: 총 서비스 시간 / 장애 횟수 -> **(장애가 발생하기 전까지 사용하는 시간 + 장애를 복구하는 시간)** 의 평균   
---
### 2. 안정성 지표 이해  

> 
> * 월요일 정오에 온라인 상태로 전환되고 금요일 정오에 장애가 발생하는 애플리케이션이 있다고 가정함.  
> * 애플리케이션은 월요일 정오부터 금요일 정오까지 **가용 상태**라고 할 수 있음.  
> * 이 경우 장애 시간은 96시간(월(12)+화(24)+수(24)+목(24)+금(12))임.  
> > **장애 시간**: 장애가 지속되는 시간이 아닌, **첫 사용부터 장애가 발생하기 이전까지의 시간**을 의미함.  

> * 금요일 정오부터 월요일 정오까지 애플리케이션에서 장애가 발생한 이유를 진단하여 복구함.  
> * 복구 결과, 애플리케이션이 다시 온라인 상태로 전환됨.  
> * 이 경우 복구 시간은 72시간(금(12)+토(24)+일(24)+월(12))임.  
> > **복구 시간**: 장애가 발생한 시점부터 정상 운영을 하기까지 복구하는데 걸리는 시간  

> <img src="https://mblogthumb-phinf.pstatic.net/20161017_201/pxckr_1476688386835K6GzP_PNG/%B1%D7%B8%B22.png?type=w2" width="500">  
>
> * 월요일 정오부터 금요일 정오까지 가용 상태이고, 금요일 정오에 장애가 발생하여 월요일 정오에 복구되는 **장애-복구-복원** 주기가 매주 발생한다고 가정함.  
> * 이 경우, **장애 시간**과 **복구 시간**의 평균을 계산할 수 있음.  
> * 이 가정에서 **MTTF(평균 장애 시간)** 은 96시간이고, **MTTR(평균 복구 시간)** 은 72시간임.  
> * 따라서 **MTBF(평균 장애 간격)** 은 **여러 건의 장애에 걸친 총 서비스 시간**이므로 MTTF와 MTTR의 합계인 168시간(1주)임.  
---
### 3. 가용성  
> * 시스템 구성 요소의 장애는 시스템의 가용성에 영향을 미침.  

> * 공식적으로, 가용성은 **시스템이 정상적으로 작동하거나 예상되는 작업을 올바르게 수행하는 시간의 비율**(또는 총 시간 대비 정상 작동 시간)임.  
> * 따라서 **예정된 중단과 예정되지 않은 중단을 포함**하여 **애플리케이션이 정상적으로 작동하지 않을 때마다** 작업을 올바르게 수행하는 시간이 줄어들기 때문에, 가용성이 저하됨.  

> * 가용성은 일정 기간(일반적으로 1년) 동안의 가동 시간 비율(즉, 장애 간에 시스템이 온라인 상태로 유지되는 시간)으로 정의됨.  

> * 가용성을 언급할 때 일반적으로 사용하는 수단은 **9의 개수**임. 예를 들어, 파이브 나인은 99.999%의 가용성을 의미함.  
---
### 4. 고가용성  
> * 고가용성 시스템이란 **성능이 어느 정도 저하되더라도 시스템이 사용 가능한 상태로 유지되는 시스템**을 말함.  
> * 고가용성 시스템에서는 가동 중지 시간이 최소화되고 사람의 개입이 거의 필요하지 않음.  

> * 고가용성 시스템은 **서로 유기적으로 작동하면서 필수 서비스를 보장**하는 **시스템 전체의 공유 리소스 집합**이라고 할 수 있음.  
> * 고가용성은 **소프트웨어를 개방형 표준 하드웨어와 결합**하여 시스템, 구성 요소 또는 애플리케이션이 실패할 때 **필수 서비스를 신속하게 복원함**으로써 가동 중단 시간을 최소화함.  
> * 이러한 고가용성 시스템에서 서비스는 대개 1분 이내에 신속하게 복원됨.  
---
### 5. 가용성 계층  

> * 가용성 요구 사항은 고객마다 다르고, 허용되는 중단 기간은 애플리케이션 유형에 따라 다름.  
> * 이 표는 일반적인 애플리케이션 가용성 설계 목표와 1년 동안 허용되는 최대 중단 기간을 보여주는 표임.  
> * 이 표에는 각 가용성 계층에서 자주 볼 수 있는 애플리케이션 유형의 예제가 나와 있음.  
---
### 6. 가용성에 영향을 미치는 요인  
> * 애플리케이션의 가용성을 저해할 수 있는 이벤트를 항상 예측할 수 없지만, 아키텍처 설계에서 가용성을 구축할 수 있음.  
> * 애플리케이션의 전반적인 가용성을 결정하는 3가지 요인이 있음.  

> **1) 내결함성**  
> > * 내결함성은 **애플리케이션 구성 요소의 기본 이중화 기능**과 **일부 구성 요소에 장애가 발생하더라도 애플리케이션이 작동 상태를 유지하는 능력**을 말함.  
> > * 내결함성은 특수 하드웨어를 사용하여 시스템 구성 요소(ex.프로세서, 메모리 보드, 전원 공급 장지, I/O 하위 시스템 또는 스토리지 하위 시스템)의 **장애를 탐지**하고 **동시에 이중화 하드웨어 구성 요소로 전환**함.  
> > * 내결함성 모델은 **소프트웨어 장애를 해결하지 못하며**, 이것은 가동 중단 시간이 발생하는 가장 일반적인 이유임.  
>  
> **2) 확장성**  
> > * 확장성은 **요구 용량 증가에 대비하고, 가용성을 유지하고, 요구되는 표준 내에서 성능을 보장**하는 애플리케이션의 능력을 말함.  
> > * 확장성이 가용성을 보장하지는 않지만 애플리케이션의 가용성에 영향을 미침.  
> 
> **3) 복구성**  
> > * 복구성은 재해로 인해 구성 요소가 사용 불능 상태가 되거나 데이터가 파괴될 경우 **데이터 손실 없이 서비스를 신속하게 복원하는 능력**을 말함.  

> * 하지만 일반적으로 가용성을 개선하면 비용이 증가함.  
> * 환경의 가용성을 높일 방법을 고려할 때, 개선 비용과 사용자에게 돌아가는 혜택 간에 균형을 맞추는 것이 중요함.  
> > * 애플리케이션이 **항상 활성 상태이거나 연결 가능한 상태로 유지**되도록 하시겠습니까?  
> > * 아니면 **허용 가능한 성능 수준 내에서 요청**을 서비스하도록 하시겠습니까?   

#

## 섹션 3: AWS Trusted Advisor  

### 1. AWS Trusted Advisor  
> * AWS Trusted Advisor는 AWS는 아키텍처 구현을 시작하는 즉시 AWS 환경을 검토하는 데 사용할 수 있는 도구임.  
> * AWS Trusted Advisor는 **AWS 모범 사례**에 따라 리소스를 프로비저닝하는 데 도움이 되도록 **실시간 지침을 제공하는 온라인 도구**임.  

> <img src="https://d1.awsstatic.com/support/jp/Trusted%20Advisor%20best%20practice%20checks%20categories.76a13b0b2bf982c874d0d03e6138b7b73e45680c.png">

> * AWS Trusted Advisor는 **전체 AWS 환경을 분석**하여 **5가지 범주별로 권장 사항**을 제시함. 
>    
> **1) 비용 최적화**  
> > * AWS Trusted Advisor는 리소스 사용량을 분석하고, 사용하지 않는 유휴 리소스를 제거하거나 예약 용량을 약정하여 **비용을 최적화**할 수 있도록 권장 사항을 제시함.  
> 
> **2) 성능**  
> > * 서비스 한도를 점검하고, 프로비저닝된 처리량을 활용하는지 확인하며, 초과 사용되는 인스턴스를 모니터링하여 **서비스 성능을 개선**함.  
> 
> **3) 보안**  
> > * 결함을 없애고, 다양한 AWS 보안 기능을 사용하며, 권한을 점검하여 **애플리케이션 보안을 개선**함.  
> 
> **4) 내결함성**  
> > * **자동 조정, 상태 확인, 다중 AZ 배포, 백업 기능**을 활용하여 **AWS 애플리케이션의 가용성과 이중화를 개선**함.  
> 
> **5) 서비스 제한**  
> > * AWS Trusted Advisor는 서비스 한도의 80%가 넘는 서비스 사용량이 있는지 점검하고 80%가 초과될 경우 사용자에게 알림을 제공함.  
> > * 사용자는 권장 사항에 따라 리소스를 삭제하거나 할당량 증가를 요청할 수 있음.  
> > * 값은 스냅샷을 기반으로 하므로 현재 사용량과 다를 수 있음.  
> > * 한도 및 사용량에 변경 사항이 반영되는 데 최대 24시간이 걸릴 수 있음.  

Trusted Advisor는 서비스 할당량의 80%가 초과될 경우 알림을 제공합니다. 사용자는 권장 사항에 따라 리소스를 삭제하거나 할당량 증가를 요청할 수 있습니다.
