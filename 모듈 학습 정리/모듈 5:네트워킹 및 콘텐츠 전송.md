# 모듈 5: 네트워킹 및 콘텐츠 전송

## 개요

### 주제
* 네트워킹 기본 정보
* Amazon VPC
* VPC 네트워킹
* VPC 보안
* Amazon Route 53
* Amazon CloudFront

### 활동
* 네트워크 다이어그램에 레이블 지정
* 기본 VPC 아키텍처 설계

### 데모 & 실습
* VPC 데모
> 녹화된 데모를 시청하면서 VPC 마법사를 사용하여 퍼블릭 및 프라이빗 서브넷이 있는 VPC를 생성하는 방법을 알아봄.

* VPC 구축 및 웹 서버 시작
> 실습에서 배운 내용을 적용하여 VPC 마법사에서 VPC를 구축하고 웹 서버를 시작해봄.

### 목표
* 네트워킹의 기본 이해
* Amazon VPC를 사용한 클라우드의 가상 네트워킹 설명
* 네트워크 다이어그램에 레이블 지정
* 기본 VPC 아키텍처 설계
* VPC 구축 단계 명시
* 보안 그룹 알아보기
* 자체 VPC를 생성하고 추가 구성 요소를 추가하여 사용자 지정 네트워크 생성
* Amazon Route 53의 기본 정보 알아보기
* Amazon CloudFront의 이점 이해

## 섹션 1: 네트워킹 기본 정보

### 1.네트워크
> * 컴퓨터 네트워크는 서로 연결되어 리소스를 공유하는 2개 이상의 클라이언트 시스템을 말함.  
> * 네트워크는 서브넷으로 논리적으로 분할할 수 있음.  
> * 네트워킹에서 모든 클라이언트를 서로 연결하고 클라이언트 간에 통신하려면 네트워킹 디바이스(ex.라우터 또는 스위치)가 필요함.  
---
### 2.IP 주소
> * 네트워크의 각 클라이언트 시스템에는 시스템을 식별하는 고유한 IP(인터넷 프로토콜)주소가 있음. IP 주소는 10진수 형식의 숫자 레이블임. 시스템은 이 10진수를 이진 형식으로 변환함.  
> * 예제에서 IP 주소는 192.0.2.0임. IP 주소의 점(.) 4개로 구분된 숫자는 각각 8비트를 8진수 형식으로 나타냄.  
> * 즉, 4개의 숫자는 각각 0~255일 수 있음. IP 주소의 4개 숫자 합계는 이진 형식의 32비트(8비트 x 4)임.
> **IPv4 및 IPv6 주소**  
> > **1) IPv4주소**: 32비트 IP 주소  
> > **2) IPv6주소**  
> > * 128비트 IP주소로 더 많은 사용자 디바이스를 지원할 수 있음.  
> > * IPv6 주소는 콜론(:)으로 구분된 **4개의 문자와 숫자**로 이루어진 **8개의 그룹**으로 구성됨.  
> > * IPv6 주소에서 콜론으로 구분된 8개 그룹 각각은 16비트를 16진수 형식으로 나타냄. 즉, 8개 그룹 각각은 0~FFFF까지의 모든 값일 수 있음.  
> > * IPv6 주소의 8개 그룹 합계는 이진 형식의 128비트임.
---
### 3.CIDR(클래스 없는 도메인 간 라우팅)
> * 네트워크를 설명하는 일반적인 방법은 CIDR임.  
> * CIDR 주소는 다음과 같이 표현됨.
> > 1) IP 주소(네트워크의 첫 번째 주소)  
> > 2) 다음으로 슬래시 문자(/)  
> > 3) 마지막으로 네트워크 식별자에 대해 고정 또는 할당해야 하는 **라우팅 접두사의 비트 수**를 알려주는 숫자  
> * 고정되지 않은 비트는 변경될 수 있음. CIDR은 서로 연속적인 IP 주소 그룹을 표현하는 방식임.  
> * 이 예제의 CIDR 주소는 192.0.2.0/24임. 마지막 숫자(24)는 처음 24비트를 고정해야 함을 나타냄. 마지막 8비트는 유연함. 즉, 192.0.2.0~192.0.2.255 범위의 28개(또는 256개)의 IP 주소를 네트워크에 사용할 수 있음. 네 번째 10진수는 0에서 255사이의 숫자로 변경될 수 있음.  
> * CIDR이 192.0.2.0/16인 경우, 마지막 숫자(16)는 처음 16비트를 고정해야 함을 나타냄. 마지막 16비트는 유연함. 즉, 192.0.0.0~192.0.255.255 범위의 216개(또는 65,536개)의 IP 주소를 네트워크에 사용할 수 있음. 세 번째와 네 번째 10진수는 각각 0에서 255사이의 숫자로 변경될 수 있음.  
>   
> CIDR에는 두 가지 특별한 경우가 있음.
> > - 모든 비트가 고정된 고정 IP 주소는 단일 IP주소(ex.192.0.2.0/32)를 나타냄. 이 유형의 주소는 방화벽 규칙을 설정하고 특정 호스트에 대한 액세스 권한을 부여하려는 경우에 유용함.  
> > - 모든 비트가 유연한 인터넷은 0.0.0.0/0으로 나타냄.  
---
### 4.OSI(Open Systems Interconnection)모델
> * OSI 모델은 **네트워크를 통해 데이터가 이동하는 방식**을 설명하는데 사용되는 개념적 모델임.  
> * 7개의 계층으로 구성되며 각 계층에서 데이터를 전송하는 데 사용되는 공통 프로토콜 및 주소를 보여줌. (ex.허브 및 스위치: 데이터링크 계층(2계층), 라우터: 네트워크 계층(3계층))  
> * OSI 모델은 VPC(가상 프라이빗 클라우드)에서 통신이 어떻게 이루어지는지 이해하는 데에도 활용할 수 있음.  
#
## 섹션 2: Amazon VPC

### 1.Amazon VPC(Virtual Private Cloud)
> * Amazon VPC는 AWS 클라우드에서 논리적으로 격리된 공간(VPC)을 프로비저닝하여 가상 네트워크에서 AWS 리소스를 시작할 수 있도록 지원하는 서비스임.  
> * Amazon VPC는 자체 IP 주소 범위 선택, 서브넷 생성, 라우팅 테이블 및 네트워크 게이트웨이 구성 등 가상 네트워킹 리소스를 완벽하게 제어할 수 있는 기능을 제공함.(VPC에서 IPv4와 IPV6을 모두 사용하여 리소스와 애플리케이션에 안전하게 액세스할 수 있음.)  
>   
> * VPC의 네트워크 구성을 손쉽게 사용자가 지정할 수 있음. 예를 들어 퍼블릭 인터넷에 액세스할 수 있는 웹 서버를 구축하기 위해 퍼블릭 서브넷을 생성할 수 있음. 퍼블릭 인터넷 액세스가 없는 프라이빗 서브넷에 데이터베이스나 애플리케이션 서버 같은 백엔드 시스템을 배치할 수 있음.  
>  
> 마지막으로 보안 그룹 및 네트워크 ACL(Access Control List)을 비롯한 다중 보안 계층을 사용하여 각 서브넷에서 Amazon EC2 인스턴스에 대한 액세스를 제어할 수 있음.  
---
### 2.VPC 및 서브넷
> **1) VPC**
> 
> <img src="https://velog.velcdn.com/images%2Fdoohyunlm%2Fpost%2Fdc3b6da5-81a4-46e7-b4f1-0574faedb51a%2Fimg.png" height="400">  
> 
> > * VPC는 AWS 클라우드에서 다른 가상 네트워크와 논리적으로 분리되어 있는 가상 네트워크임.  
> > * VPC는 고객 계정 전용으로 구성됨.  
> > * VPC는 단일 AWS 리전에 속하며, 여러 가용 영역에 걸쳐 구현될 수 있음.  

> **2) 서브넷**
> 
> <img src="https://velog.velcdn.com/images%2Fdoohyunlm%2Fpost%2F11988872-afa4-4db3-8ec6-d095d9735943%2FVPC%20%EA%B0%9C%EB%85%90(2).png" height="400">
> 
> > * VPC를 생성한 후 하나 이상의 서브넷으로 분할할 수 있음. 서브넷은 VPC의 IP 주소 범위임.  
> > * 서브넷은 단일 가용 영역에 속함. 여러 가용 영역에 서브넷을 생성하여 고가용성을 실현할 수 있음.  
> > * 서브넷은 일반적으로 퍼블릭 또는 프라이빗으로 분류됨. 퍼블릭 서브넷은 인터넷에 직접 액세스할 수 있지만, 프라이빗 서브넷은 인터넷에 직접 액세스할 수 없음.
---
### 3.IP 주소 지정
> * IP 주소는 VPC 내의 리소스가 서로 통신하고 인터넷을 통해 다른 리소스와 통신할 수 있게 해줌.  
> * VPC를 생성할 때, VPC에 IPv4 CIDR 블록(프라이빗 IPv4 주소)을 할당함.  
> * VPC를 생성한 후에는 주소 범위를 변경할 수 없으므로 신중하게 선택하는 것이 중요함.  
> * IPv4 CIDR 블록의 크기는 /16(216또는 65,536개의 주소) 또는 /28(24또는 16개의 주소)일 수 있음.  
>   
> * IPv6 CIDR 블록을 VPC와 서브넷에 연결하고 그 블록에 속한 IPv6 주소를 VPC의 리소스에 할당할 수도 있음. IPv6 CIDR 블록은 블록 크기 제한이 다름.  
>   
> * 서브넷의 CIDR 블록은 VPC의 CIDR 블록과 동일할 수 있음. 이 경우 VPC와 서브넷의 크기가 동일함(VPC의 단일 서브넷). 또한 서브넷의 CIDR 블록은 VPC의 CIDR 블록의 하위 집합일 수 있음. 이 같은 구조 덕분에 여러 개의 서브넷을 정의할 수 있음.  
> * VPC에 2개 이상의 서브넷을 만들 경우, 서브넷의 CIDR 블록이 서로 중첩되지 않아야 함.(동일한 VPC에 중복된 IP주소가 있어서는 안 됨.)
---
### 4.예약된 IP 주소
> * 서브넷을 생성할 때, 서브넷에는 자체 CIDR 블록이 필요함. 지정한 각 CIDR 블록에 대해 AWS는 해당 블록 내에 5개의 IP 주소를 예약하며 해당 주소는 사용할 수 없음.  
> * AWS는 다음 용도로 이러한 IP 주소를 예약함.
> > - 네트워크 주소  
> > - VPC 로컬 라우터(내부 통신)  
> > - DNS(Domain Name System) 확인  
> > - 향후 사용  
> > - 네트워크 브로드캐스트 주소  
> * 예를 들어 IPv4 CIDR 블록이 10.0.0.0/24인 서브넷을 생성한다고 가정할 때, 서브넷에는 256개의 IP 주소가 있지만, 5개가 예약되어 있기 때문에 251개만 사용할 수 있음.
---
### 5.퍼블릭 IP 주소 유형
> * VPC를 생성하면 해당 VPC의 모든 인스턴스에 자동으로 프라이빗 IP 주소가 할당됨. 또한 서브넷의 자동 할당 퍼블릭 IP 주소 속성을 수정하여 인스턴스를 생성할 때 할당할 퍼블릭 IP 주소를 요청할 수도 있음.  
>   
> **탄력적 IP 주소**  
> > - 동적 클라우드 컴퓨팅을 위해 설계된 정적 퍼블릭 IPv4 주소임.  
> > - 계정의 어떤 VPC에 대해서든 탄력적 IP 주소를 인스턴스 또는 네트워크 인터페이스와 연결할 수 있음.  
> > - 탄력적 IP 주소를 사용하면 주소를 VPC의 다른 인스턴스에 신속하게 다시 매핑하여 인스턴스의 장애를 마스킹할 수 있음.  
> > - 탄력적 IP 주소를 네트워크 인터페이스와 연결하면 네트워크 인터페이스의 모든 속성을 한 인스턴스에서 다른 인스턴스로 한 번에 옮길 수 있기 때문에 인스턴스에 직접 연결하는 것보다 이점이 있음.  
> > - 탄력적 IP 주소를 사용하는 경우, 추가 요금이 적용될 수 있으므로 더 이상 필요하지 않을 때에는 릴리스하는 것이 중요함.  
---
### 6. 탄력적 네트워크 인터페이스  
**네트워크 인터페이스**: 존재할 수 있는 모든 네트워크 어댑터에 대한 지속적 인터페이스를 IP 계층에 제공하기 위해 네트워크 고유 장치 드라이버 및 IP 계층과 통신하는 네트워크 고유 소프트웨어  
> * 탄력적 네트워크 인터페이스는 VPC의 인스턴스에 연결하거나 분리할 수 있는 가상 네트워크 인터페이스임.  
> * 네트워크 인터페이스의 속성은 다른 인스턴스에 다시 연결될 때 그대로 적용됨.  
> * 네트워크 인터페이스를 인스턴스 간에 이동하면, 네트워크 트래픽이 새 인스턴스로 리디렉션됨.  

> * VPC의 각 인스턴스마다 기본 네트워크 인터페이서(주 네트워크 인터페이스)가 있으며, VPC의 IPv4 주소 범위에 속하는 프라이빗 IPv4 주소가 이 인터페이스에 할당됨.  
> * 기본 네트워크 인터페이스는 인스턴스에서 분리할 수 없고, 추가 네트워크 인터페이스를 만들어 VPC의 모든 인스턴스에 연결할 수 있음.  
> * 연결 가능한 네트워크 인터페이스의 개수는 인스턴수 유형에 따라 다름.  
---
### 7. 라우팅 테이블 및 경로
> * 라우팅 테이블에는 서브넷에서 네트워크 트래픽을 전달하는 규칙 세트(경로라고 함)가 포함되어 있음.  
> * 각 경로는 대상 위치와 대상을 지정함. (대상 위치: 서브넷에서 트래픽을 전달하려는 대상 CIDR 블록, 대상: 대상 위치 트래픽이 전송되는 대상)  
> * 기본적으로 생성하는 모든 라우팅 테이블에는 VPC의 통신을 위한 로컬 경로가 포함되어 있음.  
> * 경로를 추가하여 라우팅 테이블을 사용자가 지정할 수 있지만, 내부 통신에 사용되는 로컬 라우팅 항목은 삭제할 수 없음.  

> * VPC 내의 각 서브넷은 라우팅 테이블과 연결되어야 함.  
> * **기본 라우팅 테이블**은 VPC에 자동으로 할당되는 라우팅 테이블로, 다른 라우팅 테이블과 명시적으로 연결되지 않은 모든 서브넷의 라우팅을 제어함.  
> * 서브넷은 한 번에 하나의 라우팅 테이블에만 연결할 수 있지만, 여러 서브넷을 같은 라우팅 테이블에 연결할 수 있음.  
#
## 섹션 3. VPC 네트워킹

### 1. 인터넷 게이트웨이  
> * 인터넷 게이트웨이는 확장이 가능하며, 이중화를 지원하는 고가용성 VPC 구성 요소로서 VPC의 인스턴스와 인터넷 간에 통신이 가능한 이유도 인터넷 게이트웨이가 있기 때문임.  
> * 인터넷 게이트웨이를 사용하는 2가지 목적은 **인터넷 라우팅 트래픽에 대한 VPC 라우팅 테이블의 대상을 제공**하고, **퍼블릭 IPv4 주소가 할당된 인스턴스에 대해 네트워크 주소 변환을 수행**하는 데 있음.  


> * 서브넷을 퍼블릭으로 구현하려면, VPC에 인터넷 게이트웨이를 연결하고 라우팅 테이블에 경로를 추가하여 인터넷 게이트웨이를 통해 인터넷(0.0.0.0/0)으로 비로컬 트래픽을 전송함.  
---
### 2. NAT(Network Address Translation) 게이트웨이
> * NAT(네트워크 주소 변환) 게이트웨이를 사용하면 프라이빗 서브넷의 인스턴스를 인터넷 또는 기타 AWS 서비스에 연결하는 한편, **인터넷에서 해당 인스턴스와의 연결을 시작하지 못하게 할 수 있음.**  

> * NAT 게이트웨이를 생성하려면 NAT 게이트웨이가 속할 퍼블릭 서브넷을 지정해야 하고, NAT 게이트웨이와 연결할 탄력적 IP 주소도 지정해야 함.  
> * NAT 게이트웨이를 생성한 후에는 인터넷 바운드 트래픽이 NAT 게이트웨이를 가리키도록 **하나 이상의 프라이빗 서브넷과 연결된 라우팅 테이블을 업데이트**해야 함.  
> * 그러면 프라이빗 서브넷의 인스턴스가 인터넷과 통신할 수 있음.  

> * NAT 게이트웨이 대신 VPC의 퍼블릭 서브넷에 NAT 인스턴스를 사용할 수도 있음.  
> * 하지만 NAT 게이트웨이는 더 나은 가용성과 향상된 대역폭을 제공하면서도 관리 작업은 간소화하는 관리형 NAT 서비스임.  
> * 일반 사용 사례에서는 NAT 인스턴스 대신에 NAT 게이트웨이를 사용하는 것이 좋음.  
---
### 3. VPC 공유
> * VPC 공유를 통해 고객은 **AWS Organizations의 동일한 조직 내의 다른 AWS 계정과 서브넷을 공유**할 수 있음.  
> * VPC 공유를 사용하면 여러 AWS 계정에서 Amazon EC2 인스턴스, Amazon Relational Database Service(Amazon RDS) 데이터베이스, Amazon Redshift 클러스터 및 AWS Lambda 함수와 같은 애플리케이션 리소스를 **중앙 관리형 공유 VPC**로 생성할 수 있음.  
> * 이 모델에서 VPC(소유자)를 소유하는 계정은 AWS Organizations의 동일 조직에 속한 다른 계정(참여자)과 한 개 또는 여러 개의 서브넷을 공유함.  
> * 서브넷을 공유한 후, 참여자는 **공유된 서브넷**의 해당 애플리케이션 리소스를 보고, 생성하고, 수정하고, 삭제할 수 있음.  
> * 참여자는 **다른 참여자 또는 VPC 소유자**에 속한 리소스를 보거나 수정하거나 삭제할 수 없음.

> * VPC 공유는 다음과 같은 이점을 제공함.  
> > * **업무 분리**: 중앙에서 제어되는 VPC 구조, 라우팅, IP 주소 할당  
> > * **소유권**: 애플리케이션 소유자가 리소스, 계정 및 보안 그룹을 계속 소유함.  
> > * **보안 그룹**: VPC 공유 참여자가 서로의 보안 그룹 ID를 참조할 수 있음.  
> > * **효율성**: 서브넷의 집적도 향상, VPN 및 AWS Direct Connect의 효율적인 사용이 가능함.  
> > * **하드 제한 사항 없음**: 하드 제한 사항을 피할 수 있음.(ex. 간소화된 네트워크 아키텍처를 통해 AWS Direct Connect 연결당 50개의 가상 인터페이스 생성)  
> > * **비용 최적화**: NAT 게이트웨이, VPC 인터페이스 엔드포인트 및 가용 영역 내 트래픽의 재사용을 통해 비용을 최적화함.   

> * VPC 공유를 사용하면 계정과 네트워크를 분리할 수 있음.  
> * 중앙에서 관리하는 VPC의 개수는 더 적어지고 규모는 더 커짐.  
> * 고도로 상호 연결된 애플리케이션은 이러한 방식을 자동으로 활용할 수 있음.  
---
### 4. VPC 피어링  
> * VPC 피어링 연결은 두 VPC 사이에서 비공개적으로 트래픽을 라우팅할 수 있게 하는 두 VPC 사이의 네트워킹 연결임.  
> * 마치 같은 네트워크에 있는 것처럼 양쪽 VPC의 인스턴스에서 서로 통신할 수 있음.  
> * 고객의 자체 VPC간에 VPC 피어링 연결을 생성하거나 다른 AWS 계정에 속한 VPC 또는 다른 AWS 리전에 있는 VPC와의 VPC 피어링 연결을 생성할 수 있음.  

> * 피어링 연결을 설정할 때에는 VPC가 **피어링 리소스**를 통해 서로 통신할 수 있도록 라우팅 테이블에 규칙을 생성함.  
> * 예를 들어 VPC가 2개 있다고 가정할 때, VPC A의 라우팅 테이블에서 대상 위치를 VPC B의 IP 주소로 설정하고 대상을 피어링 리소스 ID로 설정함.  
> * VPC B의 라우팅 테이블에서 대상 위치를 VPC A의 IP 주소로 설정하고 대상을 피어링 리소스 ID로 설정함.  

> * VPC 피어링에는 몇 가지 제한 사항이 있음.  
> > - IP 주소 범위는 중첩될 수 없음.  
> > - 전이적 피어링은 지원되지 않음. 예를 들어 A,B,C라는 3개의 VPC가 있다고 가정할 때, VPC A는 VPC B에 연결되고 VPC C에도 연결되지만 VPC B는 묵시적으로 VPC C에 연결되지 않음. VPC B를 VPC C에 연결하려면 해당 연결을 명시적으로 설정해야 함.  
> > - 동일한 두 VPC 간에는 하나의 피어링 리소스만 설정할 수 있음.  
---
### 5. AWS 사이트 간 VPN
> * 기본적으로 VPC로 시작하는 인스턴스는 원격 네트워크와 통신할 수 없음.  
> * VPC를 원격 네트워크에 연결하려면(즉, 가상 프라이빗 네트워크 또는 VPN 연결 생성) 다음을 수행해야 함.  
> > 1) 새 가상 게이트웨이 디바이스(VPN(가상 프라이빗 네트워크) 게이트웨이라고 함)를 생성하여 VPC에 연결함.  
> > 2) VPN 디바이스 또는 고객 게이트웨이의 구성을 정의함. 고객 게이트웨이는 디바이스가 아니라 VPN 디바이스에 대한 정보를 AWS에 제공하는 AWS 리소스임.   
> > 3) 회사 데이터 센터에 바인딩된 트래픽이 VPN 게이트웨이를 가리키도록 사용자 지정 라우팅 테이블을 만듦. 보안 그룹 규칙도 업데이트해야 함.  
> > 4) AWS 사이트 간 VPN(사이트 간 VPN)연결을 구성하여 두 시스템을 연결함.  
> > 5) 연결을 통해 트래픽을 전달하도록 라우팅을 구성함.  
---
### 6. AWS Direct Connect
> * 네트워크 통신에서 중요한 문제 중 하나는 네트워크 성능임.  
> * 데이터 센터가 AWS 리전에서 멀리 떨어져 있는 경우, 성능에 부정적인 영향을 줄 수 있음.  
> * 이러한 상황을 해결하기 위해 AWS는 AWS Direct Connect 또는 DX를 제공함.  
> * **AWS Direct Connect**를 사용하면 네트워크와 DX 로케이션 중 하나 간에 전용 프라이빗 네트워크 연결을 설정할 수 있음. 이 프라이빗 연결은 네트워크 비용을 줄이고, 대역폭 처리량을 높이며, 인터넷 기반 연결보다 더 일관된 네트워크 환경을 제공함.  
> * **DX**는 개방형 표준 802.1q VLAN(가상 로컬 영역 네트워크)를 사용함.  
---
### 7. VPC 엔드포인트
> * VPC 엔드포인트는 VPC를 AWS PrivateLink에서 제공하는 지원되는 AWS 서비스 및 VPC 엔드포인트 서비스에 **비공개로 연결할 수 있는 가상 디바이스**임.  
> * 이러한 서비스에 연결할 때는 인터넷 게이트웨이, NAT 디바이스, VPN 연결 또는 AWS Direct Connect 연결이 필요하지 않음.  
> * VPC의 인스턴스는 서비스의 리소스와 통신하는데 퍼블릭 IP 주소를 필요로 하지 않음.  
> * VPC와 기타 서비스 간의 트래픽은 Amazon 네트워크를 벗어나지 않음.  

> * VPC 엔드포인트에는 두 가지 유형이 있음.  
> **1) 인터페이스 엔드포인트**  
> > * 인터페이스 VPC 엔드포인트(인터페이스 엔드포인트)는 AWS PrivateLink로 구동되는 서비스에 연결하도록 지원함.  
> > * 이러한 서비스에는 **일부 AWS 서비스**, **자체 VPC의 다른 AWS 고객 및 AWS 파트너 네트워크(APN) 파트너가 호스팅하는 서비스(엔드포인트 서비스라고 함)** 및 **지원되는 AWS Marketplace APN 파트너 서비스**가 포함됨.  
> > * 서비스의 소유자는 서비스 공급자이고, 사용자는 인터페이스 엔드포인트를 생성하는 주체로서 서비스 소비자임.  
> > * 서비스에 대해 인터페이스 엔드포인트를 생성하고 사용하는 데에 따른 요금이 청구됨. 시간당 이용 요금 및 데이터 처리 요금이 적용됨.  

> **2) 게이트웨이 엔드포인트**
> * 게이트웨이 엔드포인트를 사용하면 추가 요금이 발생하지 않음.  
> * 데이터 전송 및 리소스 사용량에 대한 표준 요금이 그대로 적용됨.  
---
### 8. AWS Transit Gateway
> * 다양한 방법으로 VPC를 구성할 수 있으며, 다양한 연결 옵션 및 게이트웨이를 활용할 수 있음.  
> * 이러한 옵션과 게이트웨이에는 AWS Direct Connect(DX 게이트웨이를 통해), NAT 게이트웨이, 인터넷 게이트웨이, VPC 피어링 등이 포함됨.  
> * 여러 사업부, 팀, 프로젝트 등을 지원하기 위해 여러 AWS 계정 및 리전에 분산된 수백 개의 VPC를 보유한 AWS 고객을 흔히 볼 수 있음.  
> * 고객이 VPC 간에 연결을 설정하기 시작하면 상황이 더욱 복잡해짐. 모든 연결 옵션은 지점 간 연결이므로 VPC 간 연결 수가 빠르게 증가할 수 있음.  
> * AWS에서 실행하는 워크로드가 점차 늘어나고 있으므로, 이러한 증가에 발맞추기 위해 여러 계정과 VPC 전반에서 네트워크를 확장할 수 있어야 함.  

> * VPC 피어링을 사용하여 VPC 페어를 연결할 수 있지만, 지점 간 연결 정책을 중앙에서 관리하는 기능 없이 여러 VPC 전반의 지점 간 연결을 관리하는 것은 운영 비용이 많이 들고 어려울 수 있음.  
> * 온프레미스 연결의 경우 VPN을 개별 VPC에 연결해야 함. 이 솔루션은 구축하려면 시간이 오래 걸리며 여러 VPC가 수백 개로 늘어나면 관리하기가 힘들어질 수 있음.  

> <img src="https://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled.png">  
> 
> * AWS Transit Gateway를 사용하여 네트워킹 모델을 간소화하면 이 문제를 해결할 수 있음.  
> * AWS Transit Gateway를 사용하면 중앙 gateway와 네트워크 전반의 각 VPC, 온프레미스 데이터 센터 또는 원격 사무실 간의 단일 연결만 생성하여 관리하면 됨.  
> * Transit Gateway는 스포크 역할을 하는 연결된 모든 네트워크 간에 트래픽이 라우팅되는 방식을 제어하는 허브 역할을 함.  
> * 이 허브 및 스포크 모델은 각 네트워크에서 다른 네트워크에 연결할 필요 없이 AWS Transit Gateway에만 연결하면되므로, 관리를 크게 간소화하고 운영 비용을 크게 줄여줌.  
> * 새로운 VPC를 AWS Transit Gateway에 연결하면 AWS Transit Gateway에 연결된 다른 모든 네트워크에서 자동으로 사용할 수 있게 됨.  
> * 이렇게 연결이 쉽기 때문에 비즈니스 성장에 따라 네트워크를 보다 쉽게 확장할 수 있음.  
#
## 섹션 4: VPC 보안 

### 1. 보안 그룹
> * 보안 그룹은 가상 방화벽 역할을 하며, 인스턴스에 대한 인바운드 및 아웃바운드 트래픽을 제어함.  
> * 보안 그룹은 **서브넷 수준이 아니라 인스턴스 수준에서 작동**하므로 VPC에 있는 서브넷의 각 인스턴스를 서로 다른 보안 그룹 세트에 할당할 수 있음. 

> * 가장 기본적인 수준에서 보자면, 보안 그룹은 인스턴스에 대한 트래픽을 필터링하는 방법이라고 할 수 있음.  

> **Inbound**
>|Type|Protocol|Port Range|Source|Description|
>|:---:|:---:|:---:|:---:|:---:|
>|All traffic|All|All|sg-xxxxxxxxxxxx||


> **Outbound**
>|Type|Protocol|Port Range|Source|Description|
>|:---:|:---:|:---:|:---:|:---:|
>|All traffic|All|All|sg-xxxxxxxxxxxx||


> * 보안 그룹에는 인바운드 및 아웃바운드 트래픽을 제어하는 규칙이 있음.  
> * 보안 그룹을 생성할 때는 인바운드 규칙이 없음. 따라서 보안 그룹에 인바운드 규칙을 추가하기 전에는 다른 호스트에서 시작하여 인스턴스로 전송되는 인바운드 트래픽이 허용되지 않음.  
> * 기본적으로 보안 그룹은 모든 아웃바운드 트래픽을 허용하는 아웃바운드 규칙을 포함함. 이 규칙을 제거하고 특정 아웃바운드 트래픽만 허용하는 아웃바운드 규칙을 추가할 수 있음.  
> * 보안 그룹에 아웃바운드 규칙이 없는 경우, 인스턴스에서 시작되는 아웃바운드 트래픽이 허용되지 않음.  
> > **인바운드**: 외부에서 내부 인스턴스로 들어오는 요청  
> > **아웃바운드**: 인스턴스에서 외부로 나가는 트래픽  

> * 보안 그룹은 상태가 저장됨. 즉, 요청이 처리된 후에도 상태 정보가 유지됨.  
> * 따라서 사용자가 인스턴스에서 요청을 전송하면 해당 요청의 응답 트래픽은 인바운드 보안 그룹 규칙에 관계없이 인바운드 흐름이 허용됨.  
> * 아웃바운드 규칙에 관계없이 허용된 인바운드 트래픽에 대한 응답이 아웃바운드로 전송될 수 있음.  
---
### 2. 사용자 지정 보안 그룹
> **Inbound**
>|Type|Protocol|Port Range|Source|Description|
>|:---:|:---:|:---:|:---:|:---:|
>|HTTP|TCP|80|0.0.0.0/0|All web traffic|
>|HTTPS|TCP|443|0.0.0.0/0|All web traffic|
>|SSH|TCP|22|54.24.12.19/32|Office address|


> **Outbound**
>|Type|Protocol|Port Range|Source|Description|
>|:---:|:---:|:---:|:---:|:---:|
>|All traffic|All|All|0.0.0.0/0||
>|All traffic|All|All|::/0||

> * 사용자 지정 보안 그룹을 생성할 때 허용 규칙을 지정할 수 있지만 거부 규칙은 지정할 수 없음.  
> * 모든 규칙은 트래픽 허용을 결정하기 전에 평가됨.  
---
### 3. 네트워크 ACL(네트워크 액세스 제어 목록)
> * 네트워크 ACL은 Amazon VPC의 선택적 보안 계층으로, 하나 이상의 서브넷에서 송수신되는 트래픽을 제어하기 위한 방화벽 역할을 함.  
> * 보안 그룹과 유사한 규칙으로 네트워크 ACL을 설정하여 VPC에 보안 계층을 추가할 수 있음.  

> * VPC에 있는 각 서브넷을 네트워크 ACL과 연결해야 함.  
> * 서브넷을 네트워크 ACL과 명시적으로 연결하지 않을 경우, 서브넷은 기본 네트워크 ACL과 자동으로 연결됨.  
> * 한 네트워크 ACL을 여러 서브넷과 연결할 수 있음. 하지만 한 서브넷은 한 번에 한 네트워크 ACL에만 연결할 수 있음.  
> * 네트워크 ACL을 서브넷과 연결하면 이전 연결은 제거됨.  

> **Inbound**
>|Rule #|Type|Protocol|Port Range|Source|Allow/Deny|
>|:---:|:---:|:---:|:---:|:---:|:---:|
>|100|All IPv4 traffic|All|All|0.0.0.0/0|ALLOW|
>|* |All IPv4 traffic|All|All|0.0.0.0/0|DENY|

> **Outbound**
>|Rule #|Type|Protocol|Port Range|Source|Allow/Deny|
>|:---:|:---:|:---:|:---:|:---:|:---:|
>|100|All IPv4 traffic|All|All|0.0.0.0/0|ALLOW|
>|* |All IPv4 traffic|All|All|0.0.0.0/0|DENY|

> * 네트워크 ACL에는 별개의 인바운드 및 아웃바운드 규칙이 있으며, 각 규칙은 트래픽을 허용하거나 거부할 수 있음.  
> * VPC에는 수정 가능한 기본 네트워크 ACL이 자동으로 제공됨.  
> * 기본적으로 모든 인바운드 및 아웃바운드 IPv4 트래픽을 허용하며, 해당되는 경우 IPv6 트래픽도 허용함.  
> * 표에는 기본 네트워크 ACL이 나와 있음.  

> * 네트워크 ACL은 상태가 저장되지 않음. 즉, 요청이 처리된 후에는 요청에 대한 정보가 유지되지 않음.  







