# 모듈 8: 데이터베이스

## 모듈 개요

### 주제
* Amazon RDS(Relational Database Service)  
* Amazon DynamoDB  
* Amazon Redshift  
* Amazon Aurora  

### 목표
* Amazon RDS 설명  
* Amazon RDS의 기능 확인  
* Amazon DynamoDB 설명  
* Amazon DynamoDB의 기능 확인  
* Amazon Redshift 설명  
* Amazon Aurora 설명  
* RDS 데이터베이스에서 시작, 구성 및 상호 작용과 같은 작업 수행  

## 섹션 1: Amazon RDS
### 1. 비관리형 서비스와 관리형 서비스의 비교  
**비관리형 서비스**  
> * 비관리형 서비스는 사용자가 지정하는 대로 개별적으로 프로비저닝됨.  
> * 로드의 변화, 오류, 그리고 리소스를 사용할 수 없게 되는 상황에 서비스가 어떻게 대응하는지를 사용자가 관리해야 함.  
> * Amazon EC2 인스턴스에서 웹 서버를 시작한다고 가정할 때, Amazon EC2는 비관리형 솔루션이므로 AWS Auto Scaling과 같은 조정 솔루션을 사용하도록 지정하지 않는 한, 웹 서버는 증가된 트래픽 로드를 처리하도록 확장되지도 비정상 인스턴스를 정상 인스턴스로 대체하지도 않음.  
> * **비관리형 서비스를 사용하는 데 따른 이점**은 솔루션이 로드의 변화, 오류, 그리고 리소스를 사용할 수 없게 되는 상황을 처리하는 방법을A 더욱 **정교하게 제어**할 수 있다는 것임.

**관리형 서비스**  
> * 관리형 서비스는 일반적으로 구성이 좀 더 간단함.  
> * Amazon S3와 같은 클라우드 기반 스토리지 솔루션에서 호스팅하는 정적 웹 사이트가 있다고 가정할 때, 이 정적 웹 사이트에는 웹 서버가 없음.  
> * 하지만 Amazon S3는 관리형 솔루션이므로 규모 조정, 내결함성 및 가용성과 같은 기능은 Amazon S3에 의해 내부적으로 자동 처리됨.  
---
### 2. 관계형 데이터베이스의 문제점  
> * 서버 유지 관리 및 에너지 소비  
> * 소프트웨어 설치 및 패치  
> * 데이터베이스 백업 및 고가용성  
> * 확장성 제한  
> * 데이터 보안  
> * OS(운영 체제) 설치 및 패치  

**이러한 모든 작업은 다른 업무에 투입해야 할 리소스를 소모하고, 여러 분야의 전문 지식을 필요로 함.**  

---
### 3. Amazon RDS  
> * Amazon RDS는 클라우드에서 관계형 데이터베이스를 구성하고 운영하는 관리형 서비스임.  

> * 비관리형, 독립형 관계형 데이터베이스를 실행할 때 문제점을 해결하기 위해 AWS는 **관계형 데이터베이스를 설정, 운영 및 확장하고 지속적인 관리가 필요없는 서비스**를 제공함.  
> * Amazon RDS는 비용 효율적이고 크기 조정 가능한 용량을 제공하는 한편, 시간이 많이 소모되는 관리 작업을 자동화할 수 있음.  

> * Amazon RDS를 사용하면 애플리케이션에 집중할 수 있으므로, 애플리케이션에 필요한 성능, 고가용성, 보안 및 호환성을 제공할 수 있음.  
> * Amazon RDS를 사용하면 우선 순위는 **데이터 및 애플리케이션 최적화**임.  
---
### 4. 온프레미스 데이터베이스에서 Amazon RDS로  
> * **데이터베이스가 온프레미스에 있는 경우**, 데이터베이스 관리자가 모든 관리 작업을 책임짐.  
> * 데이터베이스 관리 작업에는 애플리케이션 및 쿼리 최적화, 하드웨어 설정, 하드웨어 패치, 네트워킹 및 전력 설정, HVAC(난방, 환기 및 공조)관리가 포함됨.  

> * **Amazon EC2 인스턴스**에서 실행되는 데이터베이스로 전환하면, 더 이상 기본 하드웨어를 관리하거나 데이터 센터 작업을 처리할 필요가 없음.  
> * 하지만, OS 패치 및 모든 소프트웨어 및 백업 작업의 처리는 계속 수행해야 함.  

> * **Amazon RDS 또는 Amazon Aurora**에서 데이터베이스를 설정하는 경우, 관리 작업이 줄어듦.  
> * 클라우드로 전환하면 자동으로 데이터베이스를 확장하고, 고가용성을 지원하며, 백업을 관리하고, 패치를 적용할 수 있음.  
> * 따라서 가장 중요한 작업, 즉 **애플리케이션 최적화**에 집중할 수 있음.  
---
### 5. 관리형 서비스 책임  
> * Amazon RDS를 사용하면 애플리케이션 최적화를 관리할 수 있음.  
> * AWS는 **운영 체제 설치 및 패치 적용, 데이터베이스 소프트웨어 설치 및 패치 적용, 자동 백업 및 고가용성**을 관리함.  

> * 또한 AWS는 **리소스를 확장하고, 전력 및 서버를 관리하고, 유지 관리 작업**을 수행함.  

> * 이러한 작업을 관리형 Amazon RDS 서비스로 오프로드하면 운영 워크로드 및 관계형 데이터베이스와 관련된 비용이 줄어듦.  
---
### 6. Amazon RDS DB 인스턴스  
> * Amazon RDS의 기본 빌딩 블록은 **데이터베이스 인스턴스**임.  
> * 데이터베이스 인스턴스는 **여러 사용자가 생성한 데이터베이스를 포함할 수 있는 격리된 데이터베이스 환경**임.  
> * 독립형 데이터베이스 인스턴스에 사용하는 것과 동일한 도구 및 애플리케이션을 사용하여 액세스할 수 있음.  
> * 데이터베이스 인스턴스의 리소스는 데이터베이스 인스턴스 클래스에 따라 결정되며, 스토리지 유형은 디스크 유형에 의해 지정됨.  

> * 데이터베이스 인스턴스와 스토리지는 성능 특성과 가격이 다르므로 데이터베이스 요건에 따라 스토리지 성능과 비용을 사용자가 지정할 수 있음.  
> * 데이터베이스 인스턴스를 생성하려면 먼저 실행할 데이터베이스 엔진을 지정해야 함.  
> * Amazon RDS는 현재 MySQL, Amazon Aurora, Microsoft SQL Server, PostgreSQL, MariaDB, Oracle의 6개 데이터베이스를 지원함.  
---
### 7. VPC(Virtual Private Cloud)의 Amazon RDS  
> * Amazon VPC를 사용하여 인스턴스를 실행할 수 있음.  
> * VPC를 사용하면 가상 네트워킹 환경을 제어할 수 있음.  

> * 자체 IP 주소 범위를 선택하고 서브넷을 생성하며 라우팅 및 ACL(액세스 제어 목록)을 구성할 수 있음.  
> * Amazon RDS의 기본 기능은 VPC에서 실행되는지 여부에 상관없이 동일함.  
> * 일반적으로 데이터베이스 인스턴스는 프라이빗 서브넷에서 격리되어 있으며 지정된 애플리케이션 인스턴스에만 직접 액세스할 수 있음.  
> * VPC의 서브넷은 단일 가용 영역과 연결되어 있으므로, 서브넷을 선택하면 데이터베이스 인스턴스의 가용 영역 또는 물리적 위치도 선택됨.  
---
### 8. 다중 AZ 배포를 통한 고가용성  
> * Amazon RDS의 가장 강력한 기능 중 하나는 **다중 AZ 배포를 통해 고가용성을 실현하기 위해 데이터베이스 인스턴스를 구성할 수 있다**는 것임.  
> * 다중 AZ 배포가 구성되고 나면 Amazon RDS는 동일한 VPC 내의 다른 가용 영역에 **데이터베이스 인스턴스의 대기 복사본**을 자동으로 생성함.  
> * 데이터베이스 복사본을 시드한 후, 트랜잭션은 대기 복사본에 동기식으로 복제됨.  
> * 데이터베이스 인스턴스를 다중 AZ 배포에서 실행하면 계획된 시스템 유지 관리 중 가용성을 향상시킬 수 있으며, 데이터베이스에서 데이터베이스 인스턴스 오류 및 가용 영역 중단이 발생하는 것을 방지할 수 있음.  

> * 따라서 다중 AZ 배포에서 기본 데이터베이스 인스턴스에 장애가 발생하면, Amazon RDS가 자동으로 대기 데이터베이스 인스턴스를 온라인 상태로 전환하여 새로운 기본 인스턴스로 만듦.  
> * 이러한 동기식 복제는 데이터 손실 가능성을 최소화함.  

> * 애플리케이션은 Amazon RDS DNS(Domain Name System) 엔드포인트를 사용하여 이름으로 데이터베이스를 참조하므로, 장애 조치를 위한 대기 복사본을 사용하기 위해 애플리케이션 코드를 변경할 필요가 없음.  
---
### 9. Amazon RDS 읽기 전용 복제본  
> * Amazon RDS는 또한 MySQL, MariaDB, PostgreSQL 및 Amazon Aurora용 읽기 전용 복제본 생성을 지원함.  
> * 원본 데이터베이스 인스턴스에 적용된 업데이트는 읽기 전용 복제본 인스턴스에 비동기식으로 복사됨.  
> * 애플리케이션에서 읽기 전용 복제본으로 읽기 쿼리를 라우팅하여 원본 데이터베이스 인스턴스에 대한 로드를 줄일 수 있음.  
> * 읽기 전용 복제본을 사용하면 읽기 중심의 데이터베이스 워크로드를 처리하기 위해 단일 데이터베이스 인스턴스의 용량 한계를 초과하도록 확장할 수도 있음.  
> * 읽기 전용 복제본을 마스터 데이터베이스 인스턴스로 승격할 수도 있지만, 비동기식 복제로 인해 이 작업은 수동으로 수행해야 함.  

> * 마스터 데이터베이스가 아닌 다른 리전에 읽기 전용 복제본을 생성할 수 있음.  
> * 이 기능은 재해 복구 요구 사항을 충족하거나 사용자에게 더 가까운 읽기 전용 복제본으로 읽기를 보내 지연 시간을 줄이는 데 도움이 될 수 있음.  
---
### 10. 사용 사례  
> * Amazon RDS는 높은 처리량, 대규모 스토리지 확장성 및 고가용성을 갖춘 데이터베이스가 필요한 **웹 및 모바일 애플리케이션**에 적합함.  
> * Amazon RDS에는 라이선스 제한이 없으므로 이러한 애플리케이션의 다양한 사용 패턴에 적합함.  

> * **크고 작은 규모의 전자 상거래 비즈니스**의 경우, Amazon RDS는 온라인 판매 및 소매를 위한 유연하고 안전하며 비용이 저렴한 데이터베이스 솔루션을 제공함.  

> * **모바일 및 온라인 게임**에는 높은 처리량과 가용성을 갖춘 데이터베이스 플랫폼이 필요함.  
> * Amazon RDS에서 데이터베이스 인프라를 관리하므로 게임 개발자는 데이터베이스 서버 프로비저닝, 확장 또는 모니터링에 대해 걱정할 필요가 없음.  
---
### 11. Amazon RDS가 적합한 사례  
**애플리케이션에 다음이 필요한 경우 Amazon RDS를 사용함.**  
> * 복잡한 트랜잭션 또는 복잡한 쿼리  
> * 중간 ~ 높은 쿼리 또는 쓰기 속도 - 최대 30,000 IOPS(읽기 15,000회 + 쓰기 15,000회)  
> * 단일 작업자 노드 또는 샤드로 사용  
> * 높은 내구성  

**애플리케이션에 다음이 필요한 경우 Amazon RDS를 사용해서는 안 됨.**  
> * 대규모 읽기/쓰기 속도(ex. 초당 150,000 쓰기)  
> * 큰 데이터 크기 또는 처리량 수요로 인한 샤딩  
> * NoSQL 데이터베이스가 처리할 수 있는 간단한 GET 또는 PUT 요청 및 쿼리 
> * 또는 원하는대로 바꾼 RDBMS(관계형 데이터베이스 관리 시스템)  

* Amazon RDS를 사용해서는 안 되는 경우에는 DynamoDB와 같은 NoSQL 데이터베이스 솔루션을 사용하거나, Amazon RDS 대신에 Amazon EC2 인스턴스에서 관계형 데이터베이스 엔진을 실행하는 방법을 고려할 것. 데이터베이스를 사용자가 지정할 수 있는 더 많은 옵션이 제공됨.  
---
### 12. Amazon RDS: 시간 단위 결제 및 데이터베이스 특성  
> * Amazon RDS의 비용을 추정하기 시작할 때 **서비스 시간의 클럭 시간**을 고려해야 함.  
> * 서비스 시간은 실행할 때 요금이 발생하는 리소스임.(ex. 데이터베이스 인스턴스를 시작한 시간부터 인스턴스를 종료할 때까지)  

> * 데이터베이스 특성도 고려해야 함. 선택한 데이터베이스의 **물리적 용량**에 따라 부과되는 요금이 달라짐.  
> * 데이터베이스의 특성은 데이터베이스 엔진, 크기 및 메모리 클래스에 따라 다름.  
---
### 13. Amazon RDS: DB 구매 유형 및 여러 DB 인스턴스  
**1. DB 구매 유형**  
> * **온디맨드 인스턴스**를 사용하는 경우, 최소한의 약정없이 데이터베이스 인스턴스가 실행되는 시간당 컴퓨팅 파워 비용을 지불함.  
> * **예약 인스턴스**를 사용하면 1년 또는 3년 약정으로 예약하려는 각 데이터베이스 인스턴스에 대해 저렴한 선결제 금액을 일시불로 결제할 수 있음.  

**2. DB 인스턴스 수**  
> * 또한 데이터베이스 인스턴스의 수를 고려해야 함.  
> * Amazon RDS를 사용하면 피크 로드를 처리하기 위해 여러 개의 데이터베이스 인스턴스를 프로비저닝할 수 있음.  
---
### 14. Amazon RDS: 스토리지  
> * **프로비저닝된 스토리지**를 고려해야 함.  
> * 활성 데이터베이스 인스턴스에 대해 프로비저닝된 데이터베이스 스토리지의 최대 100% 까지는 백업 스토리지에 대한 추가 비용이 없음.  
> * 데이터베이스 인스턴스가 종료된 후에는 백업 스토리지에 월별 GB당 요금이 청구됨.

> * 또한 월별 GB당 요금이 청구되는 프로비저닝된 스토리지 양 외에도 백업 스토리지 양을 고려함.  
---
### 15. Amazon RDS: 배포 유형 및 데이터 전송  
> * 데이터베이스에 대한 입력 및 출력 요청 건수를 고려함.  

> * **배포 유형**을 고려함.  
> * DB 인스턴스를 단일 가용 영역(독립형 데이터 센터와 유사) 또는 여러 가용 영역(가용성 및 내구성 향상을 위한 보조 데이터 센터와 유사)에 배포할 수 있음.  
> * 스토리지 및 I/O 요금은 배포하는 가용 영역의 수에 따라 달라짐.  

> * 마지막으로, **데이터 전송**을 고려함.  
> * 인바운드 데이터 전송은 무료이며 아웃바운드 데이터 전송 요금은 계층화되어 있음.  

> * 애플리케이션의 요구 사항에 따라 예약 인스턴스를 구매하여 Amazon RDS 데이터베이스 인스턴스 비용을 최적화할 수 있음.  
> * 예약 인스턴스를 구매할 때는 예약하려는 각 인스턴스에 대해 저렴한 금액을 일시불로 결제함.  
> * 따라서 해당 인스턴스의 시간당 사용 요금이 상당히 할인됨.  

#

## 섹션 2: Amazon DynamoDB  

### 1. 관계형 데이터베이스와 비관계형 데이터베이스 비교  
이 모듈에서는 Dynamo DB를 사용하여 관계형 데이터베이스를 비관계형 데이터베이스로 전환함.  
다음은 이 두 가지 데이터베이스 유형 간의 차이점임.  

**RDB(관계형 데이터베이스)**  
> * 관계형 데이터베이스는 테이블, 레코드 및 칼럼으로 구성된 구조화된 데이터에서 실행됨.  
> * RDB는 데이터베이스 테이블 간의 잘 정의된 관계를 설정함.  
> * RDB는 SQL(구조화 질의 언어)를 사용하며, SQL은 데이터베이스 상호 작용을 위한 프로그래밍 인터페이스를 제공하는 표준 사용자 애플리케이션임.  
> * 관계형 데이터베이스는 수평적으로 확장하거나 반구조화된 데이터에 사용하기가 어려울 수 있으며, 정규화된 데이터에 대해 많은 조인이 필요할 수도 있음.  

**비관계형 데이터베이스**  
> * 비관계형 데이터베이스는 기존 RDBMS(관계형 데이터베이스 관리 시스템)에서 제공되는 관계형 모델을 따르지 않는 데이터베이스임.  
> * 비관계형 데이터베이스는 가변 구조화 데이터의 요구 사항을 처리하기 위한 관계형 데이터베이스의 한계를 극복하도록 설계되었기 때문에 인기를 얻고 있음.  
> * 비관계형 데이터베이스는 수평적으로 확장되며, 비정형 및 반 구조화 데이터에 사용할 수 있음.  
---
### 2. Amazon DynamoDB란?  
> * DynamoDB는 규모와 관계없이 10밀리초 미만의 지연 시간이 일관되게 요구되는 모든 애플리케이션을 위한 빠르고 유연한 NoSQL 데이터베이스 서비스임.  
